{"version":3,"sources":["services/LocalStoreService.js","context/FiatContext.js","context/ConfigurationContext.js","context/ServerContext.js","components/BalancesTable.js","components/PieChart.js","context/SocketContext.js","context/BalancesContext.js","context/PerformanceContext.js","components/StatusView.js","components/TimelineView.js","context/StartingBalanceContext.js","components/PerformanceSummary.js","pages/Portfolio.js","components/LineChart.js","pages/PPerformance.js","components/LineChartCoins.js","pages/CoinAnalysis.js","components/HistoryTable.js","pages/EventHistory.js","context/ConfigurationInputContext.js","components/HtmlToolTip.js","components/ConfigP1.js","components/ConfigP2.js","components/ConfigP3.js","components/ConfigP4.js","components/ConfigMain.js","pages/Configuration.js","routes/Routes.js","pages/Main.js","services/SocketService.js","App.js","index.js"],"names":["useLocalStore","localStorageKey","defaultValue","React","useState","localStorage","getItem","value","setValue","useEffect","setItem","FiatContext","createContext","FiatProvider","props","fiatStore","fiat","setFiat","Provider","children","ConfigurationContext","ConfigurationProvider","configuration","setConfiguration","ServerContext","ServerProvider","status","updated","server","setServer","headCells","id","align","width","disablePadding","label","useTableHeadStyles","makeStyles","theme","headcolor","palette","type","backgroundColor","EnhancedTableHead","checkbox","onSelectAllClick","numSelected","rowCount","headless","classes","Checkbox","indeterminate","checked","onChange","inputProps","TableHead","TableRow","className","TableCell","padding","map","headCell","style","minWidth","TableSortLabel","useToolbarStyles","root","paddingLeft","spacing","paddingRight","highlight","color","secondary","main","lighten","light","text","primary","dark","title","flex","EnhancedTableToolbar","selected","portfolio","handleOrder","setSelected","length","Toolbar","clsx","Typography","variant","component","join","Button","startIcon","onClick","selectedCoins","i","selectedCoin","find","coin","push","useStyles","paper","marginBottom","table","paddingTop","paddingBottom","visuallyHidden","border","clip","height","margin","overflow","position","top","formatResult","num","dec","Number","Math","round","toFixed","BalancesTable","useTheme","balances","threshold","onOrder","rows","JSON","parse","Paper","TableContainer","Table","size","event","newSelecteds","n","filter","TableBody","row","index","isItemSelected","indexOf","labelId","sidechip","sidelabel","side","reverse","distribution","target","Chip","error","disabled","success","hover","selectedIndex","newSelected","concat","slice","handleClick","role","aria-checked","tabIndex","scope","number","last","trade","PieChart","mode","data","tooltip","container","background","right","bottom","left","innerRadius","padAngle","cornerRadius","colors","scheme","borderWidth","borderColor","from","modifiers","radialLabelsSkipAngle","radialLabelsTextColor","radialLabelsLinkColor","arcLinkLabelsSkipAngle","arcLinkLabelsTextColor","socket","socketio","BalancesContext","BalancesProvider","setBalances","PerformanceContext","PerformanceProvider","performance","setPerformance","flexGrow","StatusView","statuschip","useContext","Grid","alignItems","item","xs","stepper","TimelineView","numdays","startdate","date1","add","Date","date","days","timeDiff","now","adjusted","timeshift","hours","shiftedDate","getTime","getFullYear","getMonth","toString","padStart","getDate","Stepper","alternativeLabel","activeStep","connector","ColorlibConnector","Step","StepLabel","StepIconComponent","ColorlibStepIcon","withStyles","active","backgroundImage","completed","line","borderRadius","StepConnector","useColorlibStepIconStyles","zIndex","display","justifyContent","boxShadow","icons","1","2","String","icon","StartingBalanceContext","StartingBalanceProvider","startingBalance","setStartingBalance","performanceSummary","setPerformanceSummary","currency","leftTxt","rightTxt","change","currentValue","forEach","eur","usd","btc","netvalue","coins","c","direction","Portfolio","emit","noWrap","LineChart","data1","data2","getTheme","axis","ticks","stroke","fill","legend","crosshair","xScale","format","useUTC","precision","xFormat","yScale","min","max","stacked","yFormat","curve","axisTop","axisRight","axisBottom","axisLeft","legendOffset","legendPosition","enablePoints","enableGridX","enableGridY","useMesh","crosshairType","lineWidth","Performance","setData1","setData2","values","fiatValues","fiatChange","netvalues","netchange","netvaluesfiat","netchangefiat","newdata1","newdata2","dayOne","computeGraphs","initial","initialValue","initialFiatValue","day","fiatPrice","fiatValue","price","netvaluefiat","x","y","net","netfiat","console","log","prices","legends","anchor","justify","translateX","translateY","itemsSpacing","itemDirection","itemWidth","itemHeight","itemOpacity","symbolSize","symbolShape","symbolBorderColor","itemTextColor","effects","on","itemBackground","CoinAnalysis","StyledTableCell","head","common","black","white","body","fontSize","StyledTableRow","action","errortext","HistoryTable","total","eventdata","setEventdata","page","setFilter","logs","history","setHistory","hist","time","handleHistoryChange","summary","off","pt","Box","p","ToggleButtonGroup","newTypes","aria-label","ToggleButton","noValidate","autoComplete","TextField","e","Pagination","count","ceil","shape","newPage","EventHistory","ConfigurationInputContext","ConfigurationInputProvider","configurationInput","setConfigurationInput","HtmlTooltip","maxWidth","typography","pxToRem","Tooltip","ConfigP1","input","apiKey","setApiKey","apiSecret","setApiSecret","onInput","callback","field","Fragment","gutterBottom","required","name","fullWidth","iOSBoxShadow","MySlider","thumb","marginTop","marginLeft","valueLabel","track","rail","opacity","mark","markActive","Slider","marks","headheight","cell","cell2","ConfigP2","newPortfolio","setPortfolio","portfolioReceived","setPortfolioReceived","excluded","numCoins","match","slider","startnumber","startprice","prevState","handleSlider","select","maxSlider","totalSlider","numSlider","remainingSlider","numCoinsZero","labelFormatter","elevation","aria-labelledby","isSelected","step","valueLabelDisplay","valueLabelFormat","parseFloat","Skeleton","animation","columns","headerName","editable","valueFormatter","header","ConfigP3","newStartPerformance","selectedDate","setSelectedDate","recreate","setRecreate","startPerformance","setStartPerformance","handleDateChange","acceptDateChange","handleCheck","handleButton","symbol","CustomToolbar","utils","DateFnsUtils","DatePicker","disableToolbar","disableFuture","onAccept","FormControlLabel","control","coinamount","autoHeight","density","disableColumnSelector","disableColumnMenu","hideFooter","hideFooterPagination","hideFooterRowCount","onEditCellChangeCommitted","formControl","selectEmpty","textinput","ConfigP4","newBotname","botname","newThreshold","newTimeshift","newHeadless","newRunning","running","setBotname","setThreshold","setTimeshift","setHeadless","getHour","shift","current","getHours","getMinutes","currenttime","newtime","setNewtime","helperText","test","FormControl","InputLabel","Select","MenuItem","FormHelperText","layout","marginRight","breakpoints","up","buttons","button","steps","ConfigMain","enqueueSnackbar","useSnackbar","setActiveStep","setInput","handleInput","newInput","getPortfolio","storeConfiguration","CssBaseline","Error","getStepContent","autoHideDuration","Configuration","routesUp","path","sidebarName","PieChartIcon","BarChartIcon","PPerformance","ShowChartIcon","HistoryIcon","routesDown","SettingsIcon","appBar","drawer","logo","flexShrink","drawerPaper","drawerContainer","content","backdrop","bottomPush","Main","setMode","setFiatStore","open","setOpen","Object","keys","handleDarkmode","handleFiat","createMuiTheme","StyledButton","timebomb","isAfter","maxSnack","ThemeProvider","Backdrop","CircularProgress","AppBar","src","alt","Drawer","List","prop","key","to","textDecoration","ListItem","ListItemIcon","ListItemText","primaryTypographyProps","Divider","pl","labelPlacement","disableRipple","exact","SocketService","update","newPerformance","updatePerformance","config","sb","handleEvent","disconnect","App","script1","document","createElement","async","appendChild","script2","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.89c2d4d0.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport const useLocalStore = (localStorageKey, defaultValue) => {\r\n  const [value, setValue] = React.useState(\r\n    localStorage.getItem(localStorageKey) || defaultValue\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    localStorage.setItem(localStorageKey, value);\r\n  }, [value]);\r\n\r\n  return [value, setValue];\r\n};","import React, { useState, createContext } from 'react';\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\n\r\nexport const FiatContext = createContext();\r\n\r\nexport const FiatProvider = (props) => {\r\n    const fiatStore = useLocalStore('fiat', 'EUR')[0];\r\n    const [fiat, setFiat] = useState(fiatStore);\r\n\r\n    return (\r\n        <FiatContext.Provider value={[fiat, setFiat]}>\r\n            {props.children}\r\n        </FiatContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const ConfigurationContext = createContext();\r\n\r\nexport const ConfigurationProvider = (props) => {\r\n    const [configuration, setConfiguration] = useState({});\r\n\r\n    return (\r\n        <ConfigurationContext.Provider value={[configuration, setConfiguration]}>\r\n            {props.children}\r\n        </ConfigurationContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const ServerContext = createContext();\r\n\r\nexport const ServerProvider = (props) => {\r\n    const [server, setServer] = useState({\r\n        status: 'disconnected',\r\n        updated: '---',\r\n    });\r\n\r\n    return (\r\n        <ServerContext.Provider value={[server, setServer]}>\r\n            {props.children}\r\n        </ServerContext.Provider>\r\n    )\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Button from '@material-ui/core/Button';\r\nimport BackupIcon from '@material-ui/icons/Backup';\r\nimport { useTheme } from '@material-ui/core/styles';\r\n\r\nconst headCells = [\r\n    { id: 'coin', align: 'left', width: '60px', disablePadding: true, label: 'Coin' },\r\n    { id: 'amount', align: 'right', width: '100px', disablePadding: false, label: 'Amount' },\r\n    { id: 'price', align: 'right', width: '110px', disablePadding: false, label: 'BTC Price' },\r\n    { id: 'value', align: 'right', width: '110px', disablePadding: false, label: 'BTC Value' },\r\n    { id: 'distribution', align: 'right', width: '80px', disablePadding: false, label: 'Portfolio %' },\r\n    { id: 'target', align: 'right', width: '80px', disablePadding: false, label: 'Target %' },\r\n    { id: 'trade', align: 'right', width: '100px', disablePadding: false, label: 'Trade' },\r\n    { id: 'side', align: 'center', width: '100px', disablePadding: false, label: 'Order Side' },\r\n];\r\n\r\nconst useTableHeadStyles = makeStyles((theme) => ({\r\n    headcolor:\r\n        theme.palette.type === 'light'\r\n            ? {\r\n                backgroundColor: '#aaaaaa',\r\n            }\r\n            : {\r\n                backgroundColor: '#777777',\r\n            },\r\n}));\r\n\r\nfunction EnhancedTableHead(props) {\r\n    const { onSelectAllClick, numSelected, rowCount, headless } = props;\r\n    const classes = useTableHeadStyles();\r\n\r\n    let checkbox;\r\n    if (!headless) {\r\n        checkbox = <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ 'aria-label': 'select coins' }}\r\n        />\r\n    } else {\r\n        checkbox = null;\r\n    }\r\n    return (\r\n        <TableHead>\r\n            {/* <TableRow style={{ backgroundColor: '#cccccc' }}> */}\r\n            <TableRow className={classes.headcolor}>\r\n                <TableCell padding=\"checkbox\">\r\n                    {checkbox}\r\n                </TableCell>\r\n                {headCells.map((headCell) => (\r\n                    <TableCell\r\n                        key={headCell.id}\r\n                        align={headCell.align}\r\n                        padding={headCell.disablePadding ? 'none' : 'default'}\r\n                        // style={{ minWidth: '100%' }}\r\n                        style={{ minWidth: headCell.width }}\r\n                    >\r\n                        <TableSortLabel>\r\n                            {headCell.label}\r\n                        </TableSortLabel>\r\n                    </TableCell>\r\n                ))}\r\n            </TableRow>\r\n        </TableHead>\r\n    );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    numSelected: PropTypes.number.isRequired,\r\n    onSelectAllClick: PropTypes.func.isRequired,\r\n    rowCount: PropTypes.number.isRequired,\r\n    headless: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n    root: {\r\n        paddingLeft: theme.spacing(2),\r\n        paddingRight: theme.spacing(1),\r\n    },\r\n    highlight:\r\n        theme.palette.type === 'light'\r\n            ? {\r\n                color: theme.palette.secondary.main,\r\n                backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n            }\r\n            : {\r\n                color: theme.palette.text.primary,\r\n                backgroundColor: theme.palette.secondary.dark,\r\n            },\r\n    title: {\r\n        flex: '1 1 100%',\r\n    },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n    const classes = useToolbarStyles();\r\n    const { selected, headless, portfolio, handleOrder, setSelected } = props;\r\n    const numSelected = selected.length;\r\n\r\n    function onOrder() {\r\n        setSelected([]);\r\n        let selectedCoins = [];\r\n        for (let i = 0; i < selected.length; i++) {\r\n            let selectedCoin = portfolio.find(({ coin }) => coin === selected[i]);\r\n            if (selectedCoin.coin !== 'BTC') selectedCoins.push(selectedCoin);\r\n        }\r\n\r\n        handleOrder(selectedCoins);\r\n    }\r\n\r\n    return (\r\n        <Toolbar\r\n            className={clsx(classes.root, {\r\n                [classes.highlight]: numSelected > 0,\r\n            })}\r\n        >\r\n            {numSelected > 0 ? (\r\n                <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\" component=\"div\">\r\n                    {numSelected} {(numSelected === 1) ? 'coin' : 'coins'} selected: {selected.join()}\r\n                </Typography>\r\n            ) : (\r\n                <Typography className={classes.title} variant=\"subtitle1\" id=\"tableTitle\" component=\"div\">\r\n                    {(!headless) ? ('Select coins to manually submit order') : ('Running in automatic mode')}\r\n                </Typography>\r\n            )}\r\n\r\n            {(numSelected > 0) && (\r\n                <Button variant=\"contained\" color=\"secondary\" style={{ width: '220px' }} startIcon={<BackupIcon />} onClick={onOrder}>\r\n                    Submit Order\r\n                </Button>\r\n            )}\r\n        </Toolbar>\r\n    );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n    selected: PropTypes.array.isRequired,\r\n    headless: PropTypes.bool.isRequired,\r\n    portfolio: PropTypes.array.isRequired,\r\n    handleOrder: PropTypes.func.isRequired,\r\n    setSelected: PropTypes.func.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    paper: {\r\n        width: '100%',\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    table: {\r\n        minWidth: 750,\r\n        \"& .MuiTableCell-sizeSmall\": {\r\n            paddingTop: \"9px\",\r\n            paddingBottom: \"9px\",\r\n        }\r\n    },\r\n    visuallyHidden: {\r\n        border: 0,\r\n        clip: 'rect(0 0 0 0)',\r\n        height: 1,\r\n        margin: -1,\r\n        overflow: 'hidden',\r\n        padding: 0,\r\n        position: 'absolute',\r\n        top: 20,\r\n        width: 1,\r\n    },\r\n}));\r\n\r\nfunction formatResult(num, dec) {\r\n    return Number(Math.round(num + 'e' + dec) + 'e-' + dec).toFixed(dec);\r\n}\r\n\r\nexport default function BalancesTable(props) {\r\n    const classes = useStyles();\r\n    const [selected, setSelected] = React.useState([]);\r\n    const theme = useTheme();\r\n    const balances = props.balances;\r\n    const threshold = balances.threshold;\r\n    const headless = balances.headless || false;\r\n    const handleOrder = props.onOrder;\r\n\r\n    let rows = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n\r\n    const handleSelectAllClick = (event) => {\r\n        if (selected.length === 0) {\r\n            const newSelecteds = rows.map((n) => n.coin).filter(coin => coin !== 'BTC');\r\n            setSelected(newSelecteds);\r\n            return;\r\n        }\r\n        setSelected([]);\r\n    };\r\n\r\n    const handleClick = (event, coin) => {\r\n        if (!headless && coin !== 'BTC') {\r\n            const selectedIndex = selected.indexOf(coin);\r\n            let newSelected = [];\r\n\r\n            if (selectedIndex === -1) {\r\n                newSelected = newSelected.concat(selected, coin);\r\n            } else if (selectedIndex === 0) {\r\n                newSelected = newSelected.concat(selected.slice(1));\r\n            } else if (selectedIndex === selected.length - 1) {\r\n                newSelected = newSelected.concat(selected.slice(0, -1));\r\n            } else if (selectedIndex > 0) {\r\n                newSelected = newSelected.concat(\r\n                    selected.slice(0, selectedIndex),\r\n                    selected.slice(selectedIndex + 1),\r\n                );\r\n            }\r\n\r\n            setSelected(newSelected);\r\n        }\r\n    };\r\n\r\n    const isSelected = (coin) => selected.indexOf(coin) !== -1;\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Paper className={classes.paper}>\r\n                <EnhancedTableToolbar selected={selected} headless={headless} portfolio={rows} handleOrder={handleOrder} setSelected={setSelected} />\r\n                <TableContainer>\r\n                    <Table\r\n                        className={classes.table}\r\n                        size=\"small\"\r\n                    >\r\n                        <EnhancedTableHead\r\n                            classes={classes}\r\n                            numSelected={selected.length}\r\n                            onSelectAllClick={handleSelectAllClick}\r\n                            rowCount={rows.length}\r\n                            headless={headless}\r\n                        />\r\n                        <TableBody>\r\n                            {rows.map((row, index) => {\r\n                                const isItemSelected = isSelected(row.coin);\r\n                                const labelId = `enhanced-table-checkbox-${index}`;\r\n                                let sidechip = <div style={{ color: '#999999', width: '120px' }}>-</div>;\r\n                                let sidelabel = row.side;\r\n                                if (row.reverse) sidelabel += ' (reverse)';\r\n\r\n                                if (row.side === 'sell') {\r\n                                    if (row.distribution / row.target - 1 >= threshold / 100) {\r\n                                        sidechip = <Chip label={sidelabel} style={{ backgroundColor: theme.palette.error.dark, color: 'white', width: '120px' }} />\r\n                                    } else {\r\n                                        sidechip = <Chip label={sidelabel} style={{ backgroundColor: theme.palette.text.disabled, color: 'white', width: '120px' }} />\r\n                                    }\r\n                                } else if (row.side === 'buy') {\r\n                                    if (row.distribution / row.target - 1 <= -threshold / 100) {\r\n                                        sidechip = <Chip label={sidelabel} style={{ backgroundColor: theme.palette.success.dark, color: 'white', width: '120px' }} />\r\n                                    } else {\r\n                                        sidechip = <Chip label={sidelabel} style={{ backgroundColor: theme.palette.text.disabled, color: 'white', width: '120px' }} />\r\n                                    }\r\n                                }\r\n\r\n                                let checkbox;\r\n                                if (!headless && row.coin !== 'BTC') {\r\n                                    checkbox = <Checkbox\r\n                                        checked={isItemSelected}\r\n                                        inputProps={{ 'aria-labelledby': labelId }}\r\n                                    />\r\n                                } else {\r\n                                    checkbox = null;\r\n                                }\r\n\r\n                                return (\r\n                                    <TableRow\r\n                                        hover\r\n                                        onClick={(event) => handleClick(event, row.coin)}\r\n                                        role=\"checkbox\"\r\n                                        aria-checked={isItemSelected}\r\n                                        tabIndex={-1}\r\n                                        key={row.coin}\r\n                                        selected={isItemSelected}\r\n                                    >\r\n                                        <TableCell padding=\"checkbox\">\r\n                                            {checkbox}\r\n                                        </TableCell>\r\n                                        <TableCell component=\"th\" id={labelId} scope=\"row\" padding=\"none\">\r\n                                            {row.coin}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"right\">{row.number}</TableCell>\r\n                                        <TableCell align=\"right\">{formatResult(row.last, 8)}</TableCell>\r\n                                        <TableCell align=\"right\">{formatResult(row.value, 8)}</TableCell>\r\n                                        <TableCell align=\"right\">{formatResult(row.distribution, 3)}</TableCell>\r\n                                        <TableCell align=\"right\">{formatResult(row.target, 3)}</TableCell>\r\n                                        <TableCell align=\"right\">{formatResult(row.trade, 8)}</TableCell>\r\n                                        <TableCell align=\"center\">{sidechip}</TableCell>\r\n                                    </TableRow>\r\n                                );\r\n                            })}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </div>\r\n    );\r\n}","import { ResponsivePie } from '@nivo/pie';\r\nimport { useTheme } from '@material-ui/core/styles';\r\n\r\nexport default function PieChart(props) {\r\n    const mode = useTheme().palette.type;\r\n    const balances = props.balances;\r\n\r\n    const portfolio = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n    const data = portfolio.map(function (coin) {\r\n        return {\r\n            'id': coin.coin,\r\n            'label': coin.coin,\r\n            'value': coin.distribution,\r\n        }\r\n    })\r\n\r\n    return (\r\n        <ResponsivePie\r\n            theme={{\r\n                tooltip: {\r\n                    color: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n                    container: {\r\n                        background: (mode === 'light') ? \"#FFFFFF\" : \"#000000\"\r\n                    },\r\n                },\r\n            }}\r\n            data={data}\r\n            margin={{ top: 20, right: 80, bottom: 20, left: 80 }}\r\n            innerRadius={0.5}\r\n            padAngle={1}\r\n            cornerRadius={7}\r\n            colors={{ scheme: 'red_yellow_blue' }}\r\n            borderWidth={1}\r\n            borderColor={{ from: 'color', modifiers: [['darker', '0.2']] }}\r\n            radialLabelsSkipAngle={10}\r\n            radialLabelsTextColor={(mode === 'light') ? \"#000000\" : \"#FFFFFF\"}\r\n            radialLabelsLinkColor={{ from: 'color' }}\r\n            arcLinkLabelsSkipAngle={10}\r\n            arcLinkLabelsTextColor={(mode === 'light') ? \"#000000\" : \"#FFFFFF\"}\r\n        />\r\n    )\r\n}","import socketio from \"socket.io-client\";\r\n\r\nexport const socket = socketio('/');","import React, { useState, createContext } from 'react';\r\n\r\nexport const BalancesContext = createContext();\r\n\r\nexport const BalancesProvider = (props) => {\r\n    const [balances, setBalances] = useState({});\r\n\r\n    return (\r\n        <BalancesContext.Provider value={[balances, setBalances]}>\r\n            {props.children}\r\n        </BalancesContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const PerformanceContext = createContext();\r\n\r\nexport const PerformanceProvider = (props) => {\r\n    const [performance, setPerformance] = useState([]);\r\n\r\n    return (\r\n        <PerformanceContext.Provider value={[performance, setPerformance]}>\r\n            {props.children}\r\n        </PerformanceContext.Provider>\r\n    )\r\n}","import React, { useContext } from \"react\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { ServerContext } from '../context/ServerContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n        height: '68px',\r\n        minWidth: '420px',\r\n    },\r\n}));\r\n\r\nexport default function StatusView() {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const { status, updated } = useContext(ServerContext)[0];\r\n\r\n    let statuschip;\r\n    if (status === 'connected') {\r\n        statuschip = <Chip label={status} style={{ backgroundColor: theme.palette.success.dark, color: 'white', width: '90px' }} />\r\n    } else {\r\n        statuschip = <Chip label={status} style={{ backgroundColor: theme.palette.error.dark, color: 'white', width: '110px' }} />\r\n    }\r\n    return (\r\n        <Paper className={classes.paper}>\r\n            <Grid container alignItems=\"center\">\r\n                <Grid container item alignItems=\"center\" xs={6}>\r\n                    <Grid item xs={5}><Typography>Server status: </Typography></Grid>\r\n                    <Grid item xs={7}>{statuschip}</Grid>\r\n                </Grid>\r\n                <Grid container item alignItems=\"center\" xs={6}>\r\n                    <Grid item xs={12}><Typography>Last update: <b>{updated}</b></Typography></Grid>\r\n                </Grid>\r\n            </Grid>\r\n        </Paper >\r\n    )\r\n}","import React, { useContext } from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport Check from '@material-ui/icons/Check';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport StepConnector from '@material-ui/core/StepConnector';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { add } from 'date-fns'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(0),\r\n        height: '68px',\r\n        minWidth: '420px',\r\n    },\r\n    stepper: {\r\n        padding: theme.spacing(1),\r\n    }\r\n}));\r\n\r\nexport default function TimelineView(props) {\r\n    const classes = useStyles();\r\n\r\n    const configuration = useContext(ConfigurationContext)[0];\r\n    const performance = props.data || [];\r\n    let numdays = '..';\r\n    let startdate = '----/--/--';\r\n\r\n    const shiftedDate = () => {\r\n        const now = new Date();\r\n        let adjusted = now;\r\n        if (configuration.timeshift && configuration.timeshift !== 0) adjusted = add(now, { hours: configuration.timeshift });\r\n        return adjusted;\r\n    }\r\n\r\n    if (performance.length !== 0) {\r\n        let date1 = add(new Date(performance[0].date), { days: 1 }); // Move ahead one day, as starting point is stored 'yesterday'\r\n        let date2 = shiftedDate();\r\n        var timeDiff = date2.getTime() - date1.getTime();\r\n\r\n        numdays = Math.round(timeDiff / (1000 * 3600 * 24));\r\n        startdate = date1.getFullYear() + \"/\" + (date1.getMonth() + 1).toString().padStart(2, '0') + \"/\" + date1.getDate().toString().padStart(2, '0');\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.paper}>\r\n            <Grid container alignItems=\"center\">\r\n                <Grid item xs={3}><Typography align={'right'}>Start <b>{startdate}</b></Typography></Grid>\r\n                <Grid item xs={6}>\r\n                    <Stepper className={classes.stepper} alternativeLabel activeStep={1} connector={<ColorlibConnector />}>\r\n                        <Step key={0}>\r\n                            <StepLabel StepIconComponent={ColorlibStepIcon}></StepLabel>\r\n                        </Step>\r\n                        <Step key={1}>\r\n                            <StepLabel StepIconComponent={ColorlibStepIcon}></StepLabel>\r\n                        </Step>\r\n                    </Stepper>\r\n                </Grid>\r\n                <Grid item xs={3}><Typography>Active <b>{numdays}</b> {(numdays === 1) ? 'day' : 'days'}</Typography></Grid>\r\n            </Grid>\r\n        </Paper >\r\n    )\r\n}\r\n\r\nconst ColorlibConnector = withStyles({\r\n    alternativeLabel: {\r\n        top: 22,\r\n    },\r\n    active: {\r\n        '& $line': {\r\n            backgroundImage:\r\n                'linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)',\r\n        },\r\n    },\r\n    completed: {\r\n        '& $line': {\r\n            backgroundImage:\r\n                'linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)',\r\n        },\r\n    },\r\n    line: {\r\n        height: 3,\r\n        border: 0,\r\n        backgroundColor: '#eaeaf0',\r\n        borderRadius: 1,\r\n    },\r\n})(StepConnector);\r\n\r\nconst useColorlibStepIconStyles = makeStyles({\r\n    root: {\r\n        backgroundColor: '#ccc',\r\n        zIndex: 1,\r\n        color: '#fff',\r\n        width: 50,\r\n        height: 50,\r\n        display: 'flex',\r\n        borderRadius: '50%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    },\r\n    active: {\r\n        backgroundImage:\r\n            'linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)',\r\n        boxShadow: '0 4px 10px 0 rgba(0,0,0,.25)',\r\n    },\r\n    completed: {\r\n        backgroundImage:\r\n            'linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)',\r\n    },\r\n});\r\n\r\nfunction ColorlibStepIcon(props) {\r\n    const classes = useColorlibStepIconStyles();\r\n    const { active, completed } = props;\r\n\r\n    const icons = {\r\n        1: <SettingsIcon />,\r\n        2: <Check />,\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className={clsx(classes.root, {\r\n                [classes.active]: active,\r\n                [classes.completed]: completed,\r\n            })}\r\n        >\r\n            {icons[String(props.icon)]}\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, createContext } from 'react';\r\n\r\nexport const StartingBalanceContext = createContext();\r\n\r\nexport const StartingBalanceProvider = (props) => {\r\n    const [startingBalance, setStartingBalance] = useState([]);\r\n\r\n    return (\r\n        <StartingBalanceContext.Provider value={[startingBalance, setStartingBalance]}>\r\n            {props.children}\r\n        </StartingBalanceContext.Provider>\r\n    )\r\n}","import React, { useState, useEffect, useContext } from \"react\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { FiatContext } from '../context/FiatContext';\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\n\r\nexport default function StatusView(props) {\r\n    const startingBalance = useContext(StartingBalanceContext)[0];\r\n    const [performanceSummary, setPerformanceSummary] = useState({});\r\n    const balances = props.balances;\r\n    const type = props.type;\r\n    const fiat = useContext(FiatContext)[0];\r\n    let currency = (type === 'btc') ? 'BTC' : (type === 'fiat') ? fiat : 'Net BTC';\r\n    const leftTxt = (type === 'net-result') ? 'Net change (BTC)' : `${currency} value`;\r\n    const rightTxt = (type === 'net-result') ? 'Net change (%)' : `${currency} change`;\r\n\r\n    useEffect(() => {\r\n        let rows = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n\r\n        let currentValue = 0;\r\n        rows.forEach((coin) => {\r\n            currentValue += coin.number * coin.last;\r\n        });\r\n\r\n        if (type === 'fiat') currentValue = currentValue * ((fiat === 'EUR') ? balances.eur : balances.usd);\r\n\r\n        let change;\r\n        if (type === 'btc') change = (currentValue / startingBalance.btc - 1) * 100;\r\n        else if (fiat === 'EUR') change = (currentValue / startingBalance.eur - 1) * 100;\r\n        else change = (currentValue / startingBalance.usd - 1) * 100;\r\n\r\n        let netvalue = 0;\r\n\r\n        if (startingBalance.coins) rows.forEach((coin) => {\r\n            let c = startingBalance.coins.find(c => c.coin === coin.coin);\r\n            if (c.coin) netvalue += c.number * coin.last;\r\n        });\r\n\r\n        if (type === 'net-result') {\r\n            change = ((currentValue - netvalue) / startingBalance.btc) * 100\r\n            currentValue = currentValue - netvalue;\r\n        }\r\n\r\n        if (change) {\r\n            if (change < 100) change = change.toFixed(2)\r\n            else if (change < 1000) change = change.toFixed(1);\r\n            else change = change.toFixed(0);\r\n        } else {\r\n            change = '0';\r\n        }\r\n        if (currentValue) {\r\n            if (currentValue < 0.1) currentValue = currentValue.toFixed(6)\r\n            else if (currentValue < 1) currentValue = currentValue.toFixed(5)\r\n            else if (currentValue < 10) currentValue = currentValue.toFixed(4)\r\n            else if (currentValue < 100) currentValue = currentValue.toFixed(3)\r\n            else if (currentValue < 1000) currentValue = currentValue.toFixed(2);\r\n            else currentValue = currentValue.toFixed(2);\r\n        } else {\r\n            currentValue = '0';\r\n        }\r\n\r\n        setPerformanceSummary({\r\n            value: currentValue,\r\n            change: change,\r\n        });\r\n    }, [balances, startingBalance, fiat]);\r\n\r\n    return (\r\n        <Grid container alignItems=\"center\">\r\n            <Grid container item direction=\"column\" alignItems=\"center\" xs={6}>\r\n                <Grid item xs={12}><Typography variant=\"h3\">{performanceSummary.value}</Typography></Grid>\r\n                <Grid item xs={12}><Typography>{leftTxt}</Typography></Grid>\r\n            </Grid>\r\n            <Grid container item direction=\"column\" alignItems=\"center\" xs={6}>\r\n                <Grid item xs={12}><Typography variant=\"h3\">{performanceSummary.change}%</Typography></Grid>\r\n                <Grid item xs={12}><Typography>{rightTxt}</Typography></Grid>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}","import React, { useContext, useEffect } from \"react\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport BalancesTable from \"../components/BalancesTable\";\r\nimport PieChart from \"../components/PieChart\";\r\nimport { socket } from '../context/SocketContext';\r\nimport { BalancesContext } from '../context/BalancesContext';\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\nimport StatusView from \"../components/StatusView\";\r\nimport TimelineView from \"../components/TimelineView\";\r\nimport PerformanceSummary from \"../components/PerformanceSummary\";\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Portfolio = (props) => {\r\n  const classes = useStyles();\r\n\r\n  const balances = useContext(BalancesContext)[0];\r\n  const performance = useContext(PerformanceContext)[0];\r\n  const startingBalance = useContext(StartingBalanceContext)[0];\r\n\r\n  useEffect(() => {\r\n    if (socket && startingBalance.length === 0) socket.emit(\"get-starting-balances\");\r\n    return () => {\r\n    }\r\n  }, []);\r\n\r\n  function handleOrder(selected) {\r\n    socket.emit(\"market-order\", selected);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={3} alignItems=\"flex-start\">\r\n        <Grid item xs={4}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Portfolio\r\n        </Typography>\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <TimelineView data={performance} />\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <StatusView />\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <Paper style={{ height: '100px', minWidth: '420px' }} className={classes.paper}>\r\n            <PerformanceSummary balances={balances} type='btc' />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <Paper style={{ height: '100px', minWidth: '420px' }} className={classes.paper}>\r\n            <PerformanceSummary balances={balances} type='fiat' />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <Paper style={{ height: '100px', minWidth: '420px' }} className={classes.paper}>\r\n            <PerformanceSummary balances={balances} type='net-result' />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={8}>\r\n          <BalancesTable balances={balances} onOrder={handleOrder} />\r\n        </Grid>\r\n        <Grid container item xs={4}>\r\n          <Grid item xs={12}>\r\n            <Paper style={{ height: '500px' }} className={classes.paper}>\r\n              <PieChart balances={balances} />\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default Portfolio;\r\n","import React, { useContext } from 'react';\r\nimport { ResponsiveLine } from '@nivo/line'\r\nimport \"./LineChart.css\";\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { FiatContext } from '../context/FiatContext';\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\n\r\nexport default function LineChart(props) {\r\n    const mode = useTheme().palette.type;\r\n    let type = props.type;\r\n    let title = props.title;\r\n    let data1 = props.data1;\r\n    let data2 = props.data2;\r\n\r\n    // const startingBalance = useContext(StartingBalanceContext)[0];\r\n    // let performance = props.performance;\r\n    // const balances = props.balances;\r\n    // const rows = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n    // let values = [];\r\n    // let fiatValues = [];\r\n    // let change = [];\r\n    // let fiatChange = [];\r\n    // let netvalues = [];\r\n    // let netchange = [];\r\n    // let netvaluesfiat = [];\r\n    // let netchangefiat = [];\r\n    // let data1, data2 = [];\r\n    // let dayOne = [];\r\n    // const fiat = useContext(FiatContext)[0];\r\n\r\n    // rows.forEach((coin, i) => {\r\n    //     dayOne[i] = {\r\n    //         coin: coin.coin,\r\n    //         initial: 0,\r\n    //     };\r\n    // });\r\n\r\n    // let initialValue = 0;\r\n    // let initialFiatValue = 0;\r\n\r\n    // if (startingBalance.length !== 0) {\r\n    //     initialValue = startingBalance.btc;\r\n    //     initialFiatValue = (fiat === 'EUR') ? startingBalance.eur : startingBalance.usd;\r\n    // }\r\n\r\n    // if (performance.length !== 0) {\r\n    //     performance.forEach((day) => {\r\n    //         const fiatPrice = (fiat === 'EUR') ? day.eur : day.usd;\r\n    //         let value = 0;\r\n    //         let fiatValue = 0;\r\n    //         day.coins.forEach((coin) => {\r\n    //             value += coin.number * coin.price;\r\n    //             fiatValue += coin.number * coin.price * fiatPrice;\r\n    //         });\r\n\r\n    //         let netvalue = 0;\r\n    //         let netvaluefiat = 0;\r\n    //         day.coins.forEach((coin) => {\r\n    //             // Skip coins that are not in current portfolio\r\n    //             if (dayOne.find(c => c.coin === coin.coin)) {\r\n    //                 if (dayOne.find(c => c.coin === coin.coin).initial === 0) dayOne.find(c => c.coin === coin.coin).initial = coin.number;\r\n    //                 netvalue += dayOne.find(c => c.coin === coin.coin).initial * coin.price;\r\n    //                 netvaluefiat += dayOne.find(c => c.coin === coin.coin).initial * coin.price * fiatPrice;\r\n    //             }\r\n    //         })\r\n    //         values.push({\r\n    //             x: day.date,\r\n    //             y: value,\r\n    //         });\r\n    //         change.push({\r\n    //             x: day.date,\r\n    //             y: (value / initialValue - 1) * 100,\r\n    //         });\r\n    //         fiatValues.push({\r\n    //             x: day.date,\r\n    //             y: fiatValue,\r\n    //         });\r\n    //         fiatChange.push({\r\n    //             x: day.date,\r\n    //             y: (fiatValue / initialFiatValue - 1) * 100,\r\n    //         });\r\n    //         netvalues.push({\r\n    //             x: day.date,\r\n    //             y: value - netvalue,\r\n    //         });\r\n    //         netchange.push({\r\n    //             x: day.date,\r\n    //             y: ((value - netvalue) / initialValue) * 100,\r\n    //         });\r\n    //         netvaluesfiat.push({\r\n    //             x: day.date,\r\n    //             y: fiatValue - netvaluefiat,\r\n    //         });\r\n    //         netchangefiat.push({\r\n    //             x: day.date,\r\n    //             y: ((fiatValue - netvaluefiat) / initialFiatValue) * 100,\r\n    //         });\r\n    //     });\r\n    // }\r\n    // if (type === 'btc') {\r\n    //     data1 = [\r\n    //         {\r\n    //             id: 'Total Value (BTC)',\r\n    //             data: values,\r\n    //         }\r\n    //     ];\r\n    //     data2 = [\r\n    //         {\r\n    //             id: 'Total BTC Change (%)',\r\n    //             data: change,\r\n    //         }\r\n    //     ];\r\n    // } else if (type === 'fiat') {\r\n    //     title = title.replace('Fiat', `${fiat}`);\r\n    //     data1 = [\r\n    //         {\r\n    //             id: `Total Value (${fiat})`,\r\n    //             data: fiatValues,\r\n    //         }\r\n    //     ];\r\n    //     data2 = [\r\n    //         {\r\n    //             id: `Total ${fiat} Change (%)`,\r\n    //             data: fiatChange,\r\n    //         }\r\n    //     ];\r\n    // } else if (type === 'net-result') {\r\n    //     data1 = [\r\n    //         {\r\n    //             id: 'Net Balancing Result (BTC)',\r\n    //             data: netvalues,\r\n    //         }\r\n    //     ];\r\n    //     data2 = [\r\n    //         {\r\n    //             id: 'Net Balancing Result (%)',\r\n    //             data: netchange,\r\n    //         }\r\n    //     ];\r\n    // } else {\r\n    //     title = title.replace('Fiat', `${fiat}`);\r\n    //     data1 = [\r\n    //         {\r\n    //             id: `Net Balancing Result (${fiat})`,\r\n    //             data: netvaluesfiat,\r\n    //         }\r\n    //     ];\r\n    //     data2 = [\r\n    //         {\r\n    //             id: 'Net Balancing Result (%)',\r\n    //             data: netchangefiat,\r\n    //         }\r\n    //     ];\r\n    // }\r\n\r\n    const getTheme = () => {\r\n        return {\r\n            axis: {\r\n                ticks: {\r\n                    line: {\r\n                        stroke: (mode === 'light') ? \"#000000\" : \"#FFFFFF\"\r\n                    },\r\n                    text: { fill: (mode === 'light') ? \"#000000\" : \"#FFFFFF\" }\r\n                },\r\n                legend: {\r\n                    text: {\r\n                        fill: (mode === 'light') ? \"#000000\" : \"#FFFFFF\"\r\n                    }\r\n                }\r\n            },\r\n            crosshair: {\r\n                line: {\r\n                    stroke: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n                },\r\n            },\r\n            tooltip: {\r\n                container: {\r\n                    background: (mode === 'light') ? \"#FFFFFF\" : \"#000000\",\r\n                    color: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n                }\r\n            }\r\n        };\r\n    };\r\n\r\n    const getAxis1 = () => {\r\n        return {\r\n            legend: data1[0].id,\r\n            legendOffset: -80,\r\n            legendPosition: 'middle',\r\n        }\r\n    }\r\n\r\n    const getAxis2 = () => {\r\n        return {\r\n            legend: data2[0].id,\r\n            legendOffset: 70,\r\n            legendPosition: 'middle',\r\n        }\r\n    }\r\n\r\n    function uniq(a) {\r\n        var seen = {};\r\n        return a.filter(function (item) {\r\n            return seen.hasOwnProperty(item) ? false : (seen[item] = true);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"wrapper\">\r\n            <div><b>{title}</b></div>\r\n            <div className=\"secondGraph\">\r\n                {(data1) ? (\r\n                    <ResponsiveLine\r\n                        data={data1}\r\n                        // sliceTooltip={({ slice }) => {\r\n                        //     let background = (mode === 'light') ? \"#FFFFFF\" : \"#000000\";\r\n                        //     let color = (mode === 'light') ? \"#000000\" : \"#FFFFFF\";\r\n                        //     return (\r\n                        //         <div\r\n                        //             style={{\r\n                        //                 background: background,\r\n                        //                 boxShadow: '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)',\r\n                        //                 padding: '9px 12px',\r\n                        //             }}\r\n                        //         >\r\n                        //             <div>Date: <strong>{slice.points[0].data.xFormatted}</strong></div>\r\n                        //             {uniq(slice.points).map(point => (\r\n                        //                 <div\r\n                        //                     key={point.id}\r\n                        //                     style={{\r\n                        //                         color: color,\r\n                        //                         padding: '3px 0',\r\n                        //                     }}\r\n                        //                 >\r\n                        //                     {point.serieId}: <strong>{point.data.yFormatted}</strong>\r\n                        //                 </div>\r\n                        //             ))}\r\n                        //         </div>\r\n                        //     )\r\n                        // }}\r\n                        theme={getTheme()}\r\n                        margin={{ top: 40, right: 90, bottom: 50, left: 90 }}\r\n                        xScale={{\r\n                            type: 'time',\r\n                            format: '%Y/%m/%d',\r\n                            useUTC: false,\r\n                            precision: 'day',\r\n                        }}\r\n                        xFormat=\"time:%Y/%m/%d\"\r\n                        yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: false, reverse: false }}\r\n                        yFormat=\" >-.6f\"\r\n                        curve=\"monotoneX\"\r\n                        colors={['rgb(255,255,255,0)']}\r\n                        axisTop={null}\r\n                        axisRight={null}\r\n                        axisBottom={null}\r\n                        axisLeft={getAxis1()}\r\n                        enablePoints={false}\r\n                        enableGridX={false}\r\n                        enableGridY={false}\r\n                        useMesh={true}\r\n                        // enableSlices=\"y\"\r\n                        crosshairType=\"cross\"\r\n                    />\r\n                ) : (null)}\r\n            </div>\r\n            <div className=\"graphContainer\">\r\n                {(data2) ? (\r\n                    <ResponsiveLine\r\n                        data={data2}\r\n                        theme={getTheme()}\r\n                        margin={{ top: 40, right: 90, bottom: 50, left: 90 }}\r\n                        xScale={{\r\n                            type: 'time',\r\n                            format: '%Y/%m/%d',\r\n                            useUTC: false,\r\n                            precision: 'day',\r\n                        }}\r\n                        xFormat=\"time:%Y/%m/%d\"\r\n                        yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: false, reverse: false }}\r\n                        yFormat=\" >-.6f\"\r\n                        curve=\"monotoneX\"\r\n                        lineWidth={4}\r\n                        colors={['rgb(211,47,47)']}\r\n                        axisTop={null}\r\n                        axisBottom={null}\r\n                        axisRight={getAxis2()}\r\n                        axisLeft={null}\r\n                        enablePoints={false}\r\n                        enableGridX={false}\r\n                        enableGridY={false}\r\n                        useMesh={true}\r\n                        // enableSlices=\"y\"\r\n                        crosshairType=\"cross\"\r\n                    />\r\n                ) : (null)}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useContext, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TimelineView from \"../components/TimelineView\";\r\nimport StatusView from \"../components/StatusView\";\r\nimport LineChart from '../components/LineChart';\r\nimport { BalancesContext } from '../context/BalancesContext';\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\nimport { FiatContext } from '../context/FiatContext';\r\nimport { socket } from '../context/SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Performance = () => {\r\n  const classes = useStyles();\r\n\r\n  const balances = useContext(BalancesContext)[0];\r\n  const performance = useContext(PerformanceContext)[0];\r\n  const startingBalance = useContext(StartingBalanceContext)[0];\r\n  const fiat = useContext(FiatContext)[0];\r\n  const [data1, setData1] = useState({});\r\n  const [data2, setData2] = useState({});\r\n\r\n  useEffect(() => {\r\n    if (socket && startingBalance.length === 0) socket.emit(\"get-starting-balances\");\r\n    return () => {\r\n    }\r\n  }, []);\r\n\r\n  let values = [];\r\n  let fiatValues = [];\r\n  let change = [];\r\n  let fiatChange = [];\r\n  let netvalues = [];\r\n  let netchange = [];\r\n  let netvaluesfiat = [];\r\n  let netchangefiat = [];\r\n  // let data1btc = [];\r\n  // let data2btc = [];\r\n  // let data1fiat = [];\r\n  // let data2fiat = [];\r\n  // let data1net = [];\r\n  // let data2net = [];\r\n  // let data1netfiat = [];\r\n  // let data2netfiat = [];\r\n  let newdata1 = {};\r\n  let newdata2 = {};\r\n  let dayOne = [];\r\n\r\n  useEffect(() => {\r\n    computeGraphs();\r\n\r\n    return () => {\r\n    }\r\n  }, [balances, performance, startingBalance, fiat]);\r\n\r\n  const computeGraphs = () => {\r\n    const rows = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n\r\n    rows.forEach((coin, i) => {\r\n      dayOne[i] = {\r\n        coin: coin.coin,\r\n        initial: 0,\r\n      };\r\n    });\r\n\r\n    let initialValue = 0;\r\n    let initialFiatValue = 0;\r\n\r\n    if (startingBalance.length !== 0) {\r\n      initialValue = startingBalance.btc;\r\n      initialFiatValue = (fiat === 'EUR') ? startingBalance.eur : startingBalance.usd;\r\n\r\n      if (performance.length !== 0) {\r\n        performance.forEach((day) => {\r\n          const fiatPrice = (fiat === 'EUR') ? day.eur : day.usd;\r\n          let value = 0;\r\n          let fiatValue = 0;\r\n          day.coins.forEach((coin) => {\r\n            value += coin.number * coin.price;\r\n            fiatValue += coin.number * coin.price * fiatPrice;\r\n          });\r\n\r\n          let netvalue = 0;\r\n          let netvaluefiat = 0;\r\n          day.coins.forEach((coin) => {\r\n            // Skip coins that are not in current portfolio\r\n            if (dayOne.find(c => c.coin === coin.coin)) {\r\n              if (dayOne.find(c => c.coin === coin.coin).initial === 0) dayOne.find(c => c.coin === coin.coin).initial = coin.number;\r\n              netvalue += dayOne.find(c => c.coin === coin.coin).initial * coin.price;\r\n              netvaluefiat += dayOne.find(c => c.coin === coin.coin).initial * coin.price * fiatPrice;\r\n            }\r\n          })\r\n          values.push({\r\n            x: day.date,\r\n            y: value,\r\n          });\r\n          change.push({\r\n            x: day.date,\r\n            y: (value / initialValue - 1) * 100,\r\n          });\r\n          fiatValues.push({\r\n            x: day.date,\r\n            y: fiatValue,\r\n          });\r\n          fiatChange.push({\r\n            x: day.date,\r\n            y: (fiatValue / initialFiatValue - 1) * 100,\r\n          });\r\n          netvalues.push({\r\n            x: day.date,\r\n            y: value - netvalue,\r\n          });\r\n          netchange.push({\r\n            x: day.date,\r\n            y: ((value - netvalue) / initialValue) * 100,\r\n          });\r\n          netvaluesfiat.push({\r\n            x: day.date,\r\n            y: fiatValue - netvaluefiat,\r\n          });\r\n          netchangefiat.push({\r\n            x: day.date,\r\n            y: ((fiatValue - netvaluefiat) / initialFiatValue) * 100,\r\n          });\r\n        });\r\n        newdata1.btc = [\r\n          {\r\n            id: 'Total Value (BTC)',\r\n            data: values,\r\n          }\r\n        ];\r\n        newdata2.btc = [\r\n          {\r\n            id: 'Total BTC Change (%)',\r\n            data: change,\r\n          }\r\n        ];\r\n        newdata1.fiat = [\r\n          {\r\n            id: `Total Value (${fiat})`,\r\n            data: fiatValues,\r\n          }\r\n        ];\r\n        newdata2.fiat = [\r\n          {\r\n            id: `Total ${fiat} Change (%)`,\r\n            data: fiatChange,\r\n          }\r\n        ];\r\n        newdata1.net = [\r\n          {\r\n            id: 'Net Balancing Result (BTC)',\r\n            data: netvalues,\r\n          }\r\n        ];\r\n        newdata2.net = [\r\n          {\r\n            id: 'Net Balancing Result (%)',\r\n            data: netchange,\r\n          }\r\n        ];\r\n        newdata1.netfiat = [\r\n          {\r\n            id: `Net Balancing Result (${fiat})`,\r\n            data: netvaluesfiat,\r\n          }\r\n        ];\r\n        newdata2.netfiat = [\r\n          {\r\n            id: 'Net Balancing Result (%)',\r\n            data: netchangefiat,\r\n          }\r\n        ];\r\n        console.log(newdata1)\r\n        setData1(newdata1);\r\n        setData2(newdata2);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={4}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Performance\r\n        </Typography>\r\n        </Grid>\r\n        {/* <Grid item xs={2}></Grid> */}\r\n        <Grid item xs={4}>\r\n          <TimelineView data={performance} />\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <StatusView />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Paper style={{ height: '360px' }} className={classes.paper}>\r\n            <LineChart data1={data1.btc} data2={data2.btc} type={'btc'} title={'Portfolio Value (BTC)'} />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Paper style={{ height: '360px' }} className={classes.paper}>\r\n            <LineChart data1={data1.fiat} data2={data2.fiat} type={'fiat'} title={`Portfolio Value (${fiat})`} />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Paper style={{ height: '360px' }} className={classes.paper}>\r\n            <LineChart data1={data1.net} data2={data2.net} type={'net-result'} title={'Net Balancing Result (BTC)'} />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Paper style={{ height: '360px' }} className={classes.paper}>\r\n            <LineChart data1={data1.netfiat} data2={data2.netfiat} type={'net-result-fiat'} title={`Net Balancing Result (${fiat})`} />\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Performance;","import { ResponsiveLine } from '@nivo/line'\r\nimport { useTheme } from '@material-ui/core/styles';\r\n\r\nexport default function LineChart(props) {\r\n    const mode = useTheme().palette.type;\r\n\r\n    let performance = props.performance;\r\n    const balances = props.balances;\r\n    const rows = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n    let coins = [];\r\n    let data = [];\r\n    let prices = [];\r\n\r\n    rows.forEach((coin, i) => {\r\n        coins.push(coin.coin);\r\n        prices[i] = {\r\n            coin: coin.coin,\r\n            initial: 0,\r\n            data: [],\r\n        };\r\n    });\r\n\r\n    if (performance !== []) {\r\n        coins.forEach((coin, i) => {\r\n            if (coin !== 'BTC') {\r\n                performance.forEach((day) => {\r\n                    day.coins.forEach((c) => {\r\n                        if (c.coin === coin) {\r\n                            if (prices[i].initial === 0) prices[i].initial = c.price;\r\n                            prices[i].data.push({\r\n                                x: day.date,\r\n                                y: (c.price / prices[i].initial - 1) * 100,\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n                data.push({\r\n                    id: coin,\r\n                    data: prices[i].data,\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n    const getTheme = () => {\r\n        return {\r\n            axis: {\r\n                ticks: {\r\n                    line: {\r\n                        stroke: (mode === 'light') ? \"#000000\" : \"#FFFFFF\"\r\n                    },\r\n                    text: { fill: (mode === 'light') ? \"#000000\" : \"#FFFFFF\" }\r\n                },\r\n                legend: {\r\n                    text: {\r\n                        fill: (mode === 'light') ? \"#000000\" : \"#FFFFFF\"\r\n                    }\r\n                }\r\n            },\r\n            crosshair: {\r\n                line: {\r\n                    stroke: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n                },\r\n            },\r\n            legends: {\r\n                text: {\r\n                    fill: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n                }\r\n            },\r\n            tooltip: {\r\n                container: {\r\n                    background: (mode === 'light') ? \"#FFFFFF\" : \"#000000\",\r\n                    color: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n                }\r\n            }\r\n        };\r\n    };\r\n\r\n    function uniq(a) {\r\n        var seen = {};\r\n        return a.filter(function (item) {\r\n            return seen.hasOwnProperty(item) ? false : (seen[item] = true);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"wrapper\">\r\n            <div><b>{props.title}</b></div>\r\n            <div className=\"graphContainerCoins\">\r\n                <ResponsiveLine\r\n                    data={data}\r\n                    // sliceTooltip={({ slice }) => {\r\n                    //     let background = (mode === 'light') ? \"#FFFFFF\" : \"#000000\";\r\n                    //     return (\r\n                    //         <div\r\n                    //             style={{\r\n                    //                 background: background,\r\n                    //                 boxShadow: '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)',\r\n                    //                 padding: '9px 12px',\r\n                    //             }}\r\n                    //         >\r\n                    //             {/* <div>x: {slice.id}</div> */}\r\n                    //             {uniq(slice.points).map(point => (\r\n                    //                 <div\r\n                    //                     key={point.id}\r\n                    //                     style={{\r\n                    //                         color: point.serieColor,\r\n                    //                         padding: '3px 0',\r\n                    //                     }}\r\n                    //                 >\r\n                    //                     {point.serieId} <strong>{point.data.yFormatted}%</strong>\r\n                    //                 </div>\r\n                    //             ))}\r\n                    //         </div>\r\n                    //     )\r\n                    // }}\r\n                    theme={getTheme()}\r\n                    margin={{ top: 50, right: 110, bottom: 50, left: 80 }}\r\n                    xScale={{\r\n                        type: 'time',\r\n                        format: '%Y/%m/%d',\r\n                        useUTC: false,\r\n                        precision: 'day',\r\n                    }}\r\n                    xFormat=\"time:%Y/%m/%d\"\r\n                    yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: false, reverse: false }}\r\n                    yFormat=\" >-.2f\"\r\n                    curve=\"monotoneX\"\r\n                    lineWidth={4}\r\n                    colors={{ scheme: 'red_yellow_blue' }}\r\n                    axisTop={null}\r\n                    axisRight={null}\r\n                    axisBottom={null}\r\n                    axisLeft={{\r\n                        legend: 'Change (%)',\r\n                        legendOffset: -70,\r\n                        legendPosition: 'middle',\r\n                    }}\r\n                    enablePoints={false}\r\n                    enableGridX={false}\r\n                    enableGridY={false}\r\n                    useMesh={true}\r\n                    // enableSlices=\"y\"\r\n                    crosshairType=\"cross\"\r\n                    legends={[\r\n                        {\r\n                            anchor: 'bottom-right',\r\n                            direction: 'column',\r\n                            justify: false,\r\n                            translateX: 100,\r\n                            translateY: 0,\r\n                            itemsSpacing: 0,\r\n                            itemDirection: 'left-to-right',\r\n                            itemWidth: 80,\r\n                            itemHeight: 20,\r\n                            itemOpacity: 0.75,\r\n                            symbolSize: 12,\r\n                            symbolShape: 'circle',\r\n                            symbolBorderColor: 'rgba(0, 0, 0, .5)',\r\n                            itemTextColor: \"#ff0000\",\r\n                            effects: [\r\n                                {\r\n                                    on: 'hover',\r\n                                    style: {\r\n                                        itemBackground: 'rgba(0, 0, 0, .03)',\r\n                                        itemOpacity: 1\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    ]}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useContext, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TimelineView from \"../components/TimelineView\";\r\nimport StatusView from \"../components/StatusView\";\r\nimport LineChartCoins from '../components/LineChartCoins';\r\nimport { BalancesContext } from '../context/BalancesContext';\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\nimport { socket } from '../context/SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst CoinAnalysis = () => {\r\n  const classes = useStyles();\r\n\r\n  const balances = useContext(BalancesContext)[0];\r\n  const performance = useContext(PerformanceContext)[0];\r\n  const startingBalance = useContext(StartingBalanceContext)[0];\r\n\r\n  useEffect(() => {\r\n    if (socket && startingBalance.length === 0) socket.emit(\"get-starting-balances\");\r\n    return () => {\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={4}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Coin Analysis\r\n        </Typography>\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <TimelineView data={performance} />\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <StatusView />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Paper style={{ height: '700px' }} className={classes.paper}>\r\n            <LineChartCoins performance={performance} balances={balances} title={'Coin BTC Price Changes (%)'} />\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CoinAnalysis;","import React, { useEffect, useState } from 'react';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport { socket } from '../context/SocketContext';\r\n\r\nconst StyledTableCell = withStyles((theme) => ({\r\n    head: {\r\n        backgroundColor: theme.palette.common.black,\r\n        color: theme.palette.common.white,\r\n    },\r\n    body: {\r\n        fontSize: 14,\r\n    },\r\n}))(TableCell);\r\n\r\nconst StyledTableRow = withStyles((theme) => ({\r\n    root: {\r\n        '&:nth-of-type(odd)': {\r\n            backgroundColor: theme.palette.action.hover,\r\n        },\r\n    },\r\n}))(TableRow);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n            width: 200,\r\n        },\r\n    },\r\n    table: {\r\n        minWidth: 700,\r\n    },\r\n    errortext: {\r\n        color: \"#ff0000\",\r\n    },\r\n}));\r\n\r\nexport default function HistoryTable() {\r\n    const classes = useStyles();\r\n\r\n    let [eventdata, setEventdata] = useState({\r\n        rows: [],\r\n        total: 0,\r\n    });\r\n\r\n    let [filter, setFilter] = useState({\r\n        type: ['order', 'event'],\r\n        event: '',\r\n        page: '1',\r\n    });\r\n\r\n    let [history, setHistory] = useState({\r\n        logs: [],\r\n        total: 0,\r\n    });\r\n\r\n    const handleHistoryChange = (hist) => {\r\n        let rows = []\r\n        hist.logs.reverse().forEach((log) => {\r\n            if (log.type !== 'order') log.type = 'event';\r\n            rows.push({\r\n                time: log.time,\r\n                type: log.type,\r\n                event: log.event,\r\n            });\r\n        });\r\n        setEventdata({\r\n            rows: rows,\r\n            total: hist.total,\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        handleHistoryChange(history);\r\n\r\n        return () => {\r\n        }\r\n    }, [history]);\r\n\r\n\r\n    const handleEvent = (log, summary) => {\r\n        if (socket) socket.emit(\"get-logs\", filter);\r\n    };\r\n\r\n    useEffect(() => {\r\n        socket.on(\"event-history\", (logs, total) => {\r\n            logs.forEach((log) => {\r\n                if (log.type !== 'order') log.type = 'event';\r\n            });\r\n            setHistory({\r\n                logs: logs,\r\n                total: total,\r\n            });\r\n        });\r\n        socket.on(\"event\", function (log, summary) {\r\n            if (log.type !== 'order') log.type = 'event';\r\n            handleEvent(log, summary);\r\n        });\r\n\r\n        return () => {\r\n            socket.off(\"event-history\");\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (socket) socket.emit(\"get-logs\", filter);\r\n        return () => {\r\n        }\r\n    }, [filter]);\r\n\r\n    const handlePage = (event, newPage) => {\r\n        setFilter({\r\n            type: filter.type,\r\n            event: filter.event,\r\n            page: newPage,\r\n        });\r\n    };\r\n\r\n    const handleTypeFilter = (event, newTypes) => {\r\n        setFilter({\r\n            type: newTypes,\r\n            event: filter.event,\r\n            page: filter.page,\r\n        });\r\n    };\r\n\r\n    const handleEventFilter = (e) => {\r\n        setFilter({\r\n            type: filter.type,\r\n            event: e.target.value,\r\n            page: filter.page,\r\n        });\r\n    }\r\n\r\n    return (\r\n        <Paper pt={2}>\r\n            <Grid container style={{ height: '60px' }} alignItems=\"center\">\r\n                <Box p={1}>\r\n                    <Grid item xs={3}>\r\n                        <ToggleButtonGroup value={filter.type} onChange={handleTypeFilter} aria-label=\"type selection\">\r\n                            <ToggleButton value=\"order\" aria-label=\"order\" style={{ height: '30px' }} >\r\n                                <Typography variant=\"overline\" noWrap>\r\n                                    Orders\r\n                                </Typography>\r\n                            </ToggleButton>\r\n                            <ToggleButton value=\"event\" aria-label=\"event\" style={{ height: '30px' }} >\r\n                                <Typography variant=\"overline\" noWrap>\r\n                                    Events\r\n                                </Typography>\r\n                            </ToggleButton>\r\n                        </ToggleButtonGroup>\r\n                    </Grid>\r\n                </Box>\r\n                <Grid item xs={2}>\r\n                    <form className={classes.root} noValidate autoComplete=\"off\">\r\n                        <TextField id=\"event-filter\" label=\"Filter events\" color=\"secondary\" onChange={handleEventFilter} />\r\n                    </form>\r\n                </Grid>\r\n                <Grid item xs={7}></Grid>\r\n            </Grid>\r\n            <TableContainer component={Paper}>\r\n                <Table className={classes.table} size=\"small\" aria-label=\"customized table\">\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <StyledTableCell style={{ width: '170px' }}>Time</StyledTableCell>\r\n                            <StyledTableCell>Event</StyledTableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {eventdata.rows.map((row, i) => (\r\n                            <StyledTableRow key={i}>\r\n                                <StyledTableCell component=\"th\" scope=\"row\">\r\n                                    <Typography variant=\"caption\">{row.time}</Typography>\r\n                                </StyledTableCell>\r\n                                <StyledTableCell>\r\n                                    {(row.type === 'event') ? (\r\n                                        <Typography variant=\"body2\" className={classes.errortext}>{row.event}</Typography>\r\n                                    ) : (\r\n                                        <Typography variant=\"body2\">{row.event}</Typography>\r\n                                    )}\r\n                                </StyledTableCell>\r\n                            </StyledTableRow>\r\n                        ))}\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\" >\r\n                <Pagination count={Math.ceil(eventdata.total / 20)} shape=\"rounded\" onChange={handlePage} />\r\n            </Box>\r\n        </Paper>\r\n    );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport HistoryTable from \"../components/HistoryTable\";\r\nimport StatusView from '../components/StatusView';\r\nimport TimelineView from \"../components/TimelineView\";\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst EventHistory = (props) => {\r\n  const classes = useStyles();\r\n  const performance = useContext(PerformanceContext)[0];\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={4}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Event History\r\n        </Typography>\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <TimelineView data={performance} />\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <StatusView />\r\n        </Grid>\r\n        <Grid item xs={8}>\r\n          <HistoryTable />\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\nexport default EventHistory;\r\n","import React, { useState, createContext } from 'react';\r\n\r\nexport const ConfigurationInputContext = createContext();\r\n\r\nexport const ConfigurationInputProvider = (props) => {\r\n    const [configurationInput, setConfigurationInput] = useState({});\r\n\r\n    return (\r\n        <ConfigurationInputContext.Provider value={[configurationInput, setConfigurationInput]}>\r\n            {props.children}\r\n        </ConfigurationInputContext.Provider>\r\n    )\r\n}","import { withStyles, useTheme } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nexport const HtmlTooltip = withStyles((theme) => ({\r\n    tooltip: {\r\n        backgroundColor: (useTheme().palette.type === 'light') ? \"#FFFFFF\" : \"#000000\",\r\n        color: (useTheme().palette.type === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n        maxWidth: 600,\r\n        fontSize: theme.typography.pxToRem(14),\r\n        border: '1px solid #555555',\r\n    },\r\n}))(Tooltip);","import React, { useState, useContext } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { HtmlTooltip } from './HtmlToolTip';\r\n\r\nexport default function ConfigP1(props) {\r\n\r\n    const [input, setInput] = useContext(ConfigurationInputContext);\r\n    const [apiKey, setApiKey] = useState(input.apiKey);\r\n    const [apiSecret, setApiSecret] = useState(input.apiSecret);\r\n\r\n    const onInput = (e) => {\r\n        props.callback({\r\n            field: e.target.id,\r\n            input: e.target.value\r\n        });\r\n\r\n        if (e.target.id === 'apiKey') setApiKey(e.target.value);\r\n        if (e.target.id === 'apiSecret') setApiSecret(e.target.value);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Grid container alignItems=\"flex-end\">\r\n                <Grid item xs={11}>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                        Exchange API Details\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                    <HtmlTooltip\r\n                        title={\r\n                            <React.Fragment>\r\n                                {\"If you haven't done so already, logon to your exchange, go to API Management and create a new API. Then enter the API key and API secret here.\"}\r\n                                <div>&nbsp;</div>\r\n                                <div><i>{\"Note: \"}</i>{\"You only need to enter the API details once, as your API details will be stored on the server for later use. If you want to change the configuration settings at a later point, you can just click the Next button and reuse the API that you've already configured previously. If you want to change to a different API, you can override the original API by entering the new details here.\"}</div>\r\n                            </React.Fragment>\r\n                        }\r\n                    >\r\n                        <InfoOutlinedIcon />\r\n                    </HtmlTooltip>\r\n                </Grid>\r\n            </Grid>\r\n            <form style={{ minWidth: '100%' }}>\r\n                <Grid container spacing={3}>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            required\r\n                            id=\"apiKey\"\r\n                            name=\"apiKey\"\r\n                            label=\"API Key\"\r\n                            type=\"password\"\r\n                            value={apiKey}\r\n                            onChange={onInput}\r\n                            fullWidth\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            required\r\n                            id=\"apiSecret\"\r\n                            name=\"apiSecret\"\r\n                            label=\"API Secret\"\r\n                            type=\"password\"\r\n                            value={apiSecret}\r\n                            onChange={onInput}\r\n                            fullWidth\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        </React.Fragment>\r\n    );\r\n}","import React, { useState, useEffect, useContext } from 'react';\r\nimport { withStyles, makeStyles, lighten } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Box from '@material-ui/core/Box';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { HtmlTooltip } from './HtmlToolTip';\r\n\r\nimport { socket } from '../context/SocketContext';\r\n\r\nconst iOSBoxShadow =\r\n    '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)';\r\n\r\nconst MySlider = withStyles({\r\n    root: {\r\n        height: 2,\r\n        padding: '15px 0',\r\n    },\r\n    thumb: {\r\n        height: 28,\r\n        width: 28,\r\n        boxShadow: iOSBoxShadow,\r\n        marginTop: -14,\r\n        marginLeft: -14,\r\n        '&:focus, &:hover, &$active': {\r\n            boxShadow: '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)',\r\n            // Reset on touch devices, it doesn't add specificity\r\n            '@media (hover: none)': {\r\n                boxShadow: iOSBoxShadow,\r\n            },\r\n        },\r\n    },\r\n    active: {},\r\n    valueLabel: {\r\n        left: 'calc(-50% + 12px)',\r\n        top: 9,\r\n        '& *': {\r\n            background: 'transparent',\r\n            color: '#FFFFFF',\r\n        },\r\n    },\r\n    track: {\r\n        height: 3,\r\n    },\r\n    rail: {\r\n        height: 2,\r\n        opacity: 0.5,\r\n        backgroundColor: 'secondary',\r\n    },\r\n    mark: {\r\n        backgroundColor: 'secondary',\r\n        height: 8,\r\n        width: 1,\r\n        marginTop: -3,\r\n    },\r\n    markActive: {\r\n        opacity: 1,\r\n        backgroundColor: 'currentColor',\r\n    },\r\n})(Slider);\r\n\r\nconst headCells = [\r\n    { id: 'coin', align: 'left', disablePadding: true, label: 'Coin' },\r\n    { id: 'change', align: 'center', disablePadding: false, label: 'Change Distribution (%)' },\r\n    { id: 'distribution', align: 'left', disablePadding: false, label: '' },\r\n    { id: 'notifications', align: 'left', disablePadding: false, label: '' },\r\n];\r\n\r\nconst marks = [\r\n    {\r\n        value: -1,\r\n        label: '',\r\n    },\r\n    {\r\n        value: 100,\r\n        label: '',\r\n    },\r\n];\r\n\r\nconst useTableHeadStyles = makeStyles((theme) => ({\r\n    headcolor:\r\n        theme.palette.type === 'light'\r\n            ? {\r\n                backgroundColor: '#aaaaaa',\r\n            }\r\n            : {\r\n                backgroundColor: '#777777',\r\n            },\r\n    headheight: {\r\n        height: 44,\r\n    },\r\n}));\r\n\r\nfunction EnhancedTableHead(props) {\r\n    const { onSelectAllClick, numSelected, rowCount } = props;\r\n    const classes = useTableHeadStyles();\r\n\r\n    let checkbox;\r\n    checkbox = <Checkbox\r\n        indeterminate={numSelected > 0 && numSelected < rowCount}\r\n        checked={rowCount > 0 && numSelected === rowCount}\r\n        onChange={onSelectAllClick}\r\n        inputProps={{ 'aria-label': 'select coins' }}\r\n    />\r\n    return (\r\n        <TableHead>\r\n            <TableRow className={`${classes.headcolor} ${classes.headheight}`}>\r\n                <TableCell padding=\"checkbox\">\r\n                    {checkbox}\r\n                </TableCell>\r\n                {headCells.map((headCell) => (\r\n                    <TableCell\r\n                        key={headCell.id}\r\n                        align={headCell.align}\r\n                        padding={headCell.disablePadding ? 'none' : 'default'}\r\n                    >\r\n                        <TableSortLabel>\r\n                            {headCell.label}\r\n                        </TableSortLabel>\r\n                    </TableCell>\r\n                ))}\r\n            </TableRow>\r\n        </TableHead>\r\n    );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    numSelected: PropTypes.number.isRequired,\r\n    onSelectAllClick: PropTypes.func.isRequired,\r\n    rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n    root: {\r\n        paddingLeft: theme.spacing(2),\r\n        paddingRight: theme.spacing(1),\r\n    },\r\n    highlight:\r\n        theme.palette.type === 'light'\r\n            ? {\r\n                color: theme.palette.secondary.main,\r\n                backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n            }\r\n            : {\r\n                color: theme.palette.text.primary,\r\n                backgroundColor: theme.palette.secondary.dark,\r\n            },\r\n    title: {\r\n        flex: '1 1 100%',\r\n    },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n    const classes = useToolbarStyles();\r\n    const { selected, portfolio, setSelected } = props;\r\n    const numSelected = selected.length;\r\n\r\n    return (\r\n        <Toolbar\r\n            className={clsx(classes.root, {\r\n                [classes.highlight]: numSelected > 0,\r\n            })}\r\n        >\r\n            {numSelected > 0 ? (\r\n                <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\" component=\"div\">\r\n                    {(numSelected === 1) ? 'Coin' : 'Coins'} <i>excluded</i> from balancing: {selected.join()}\r\n                </Typography>\r\n            ) : (\r\n                <Typography className={classes.title} variant=\"subtitle1\" id=\"tableTitle\" component=\"div\">\r\n                    Select coins to be <i>excluded</i> from balancing\r\n                </Typography>\r\n            )}\r\n        </Toolbar>\r\n    );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n    selected: PropTypes.array.isRequired,\r\n    portfolio: PropTypes.array.isRequired,\r\n    setSelected: PropTypes.func.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    paper: {\r\n        width: '800px',\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    table: {\r\n        maxWidth: 800,\r\n        minWidth: 800,\r\n        \"& .MuiTableCell-sizeSmall\": {\r\n            paddingTop: \"6px\",\r\n            paddingBottom: \"0px\",\r\n        },\r\n    },\r\n    cell: {\r\n        width: 50,\r\n    },\r\n    cell2: {\r\n        width: 120,\r\n    },\r\n    visuallyHidden: {\r\n        border: 0,\r\n        clip: 'rect(0 0 0 0)',\r\n        height: 1,\r\n        margin: -1,\r\n        overflow: 'hidden',\r\n        padding: 0,\r\n        position: 'absolute',\r\n        top: 20,\r\n        width: 1,\r\n    },\r\n}));\r\n\r\nexport default function ConfigP2(props) {\r\n    const classes = useStyles();\r\n\r\n    const [input, setInput] = useContext(ConfigurationInputContext);\r\n    const newPortfolio = (input.portfolio) ? input.portfolio : [];\r\n    const [portfolio, setPortfolio] = useState(newPortfolio);\r\n    const [portfolioReceived, setPortfolioReceived] = useState(false);\r\n\r\n    let newSelected = [];\r\n    newPortfolio.forEach((coin) => {\r\n        if (coin.excluded) newSelected.push(coin.coin);\r\n    });\r\n    const [selected, setSelected] = useState(newSelected);\r\n    const precision = 2;\r\n\r\n    const onInput = (data) => {\r\n        props.callback({\r\n            field: 'portfolio',\r\n            input: data,\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        socket.on(\"portfolio\", data => {\r\n            const numCoins = data.length;\r\n            data.forEach((coin) => {\r\n                // Check if coin was already in portfolio or is newly added to account\r\n                const match = input.portfolio.find(c => c.coin === coin.coin);\r\n                if (!match) {\r\n                    // On initial configuration, don't exclude coins\r\n                    if (input.apiKey === '************' && input.apiSecret === '************') {\r\n                        coin.slider = -1;\r\n                        coin.distribution = 0;\r\n                        coin.excluded = true;\r\n                        setSelected(prevState => [...prevState, coin.coin]);\r\n                    } else {\r\n                        coin.slider = -1;\r\n                        coin.distribution = (100 / numCoins).toFixed(2);\r\n                        coin.excluded = false;\r\n                    }\r\n                    coin.startnumber = coin.number;\r\n                    coin.startprice = coin.price;\r\n                } else {\r\n                    // Keep previously set start number and start price\r\n                    coin.slider = match.slider;\r\n                    coin.distribution = match.distribution;\r\n                    coin.excluded = match.excluded;\r\n                    coin.startnumber = match.startnumber;\r\n                    coin.startprice = match.startprice;\r\n                }\r\n            });\r\n            setPortfolioReceived(true);\r\n            setPortfolio(data);\r\n            onInput(data);\r\n        });\r\n\r\n        return () => {\r\n            socket.off(\"portfolio\");\r\n        }\r\n    }, []);\r\n\r\n    const handleSelectAllClick = (event) => {\r\n        let newSelected = [];\r\n        if (selected.length === 0) {\r\n            newSelected = portfolio.map((n) => n.coin).filter(coin => coin !== 'BTC');\r\n        }\r\n        setSelected(newSelected);\r\n\r\n        portfolio.forEach((coin) => {\r\n            handleSlider(coin.slider, coin.coin, newSelected);\r\n        })\r\n    };\r\n\r\n    const handleClick = (coin) => {\r\n        if (coin !== 'BTC') {\r\n            const selectedIndex = selected.indexOf(coin);\r\n\r\n            let newPortfolio = [...portfolio];\r\n            let match = newPortfolio.find(c => c.coin === coin);\r\n            match.excluded = (selectedIndex === -1);\r\n            setPortfolio(newPortfolio);\r\n\r\n            let newSelected = [];\r\n\r\n            if (selectedIndex === -1) {\r\n                newSelected = newSelected.concat(selected, coin);\r\n            } else if (selectedIndex === 0) {\r\n                newSelected = newSelected.concat(selected.slice(1));\r\n            } else if (selectedIndex === selected.length - 1) {\r\n                newSelected = newSelected.concat(selected.slice(0, -1));\r\n            } else if (selectedIndex > 0) {\r\n                newSelected = newSelected.concat(\r\n                    selected.slice(0, selectedIndex),\r\n                    selected.slice(selectedIndex + 1),\r\n                );\r\n            }\r\n\r\n            setSelected(newSelected);\r\n            handleSlider(match.slider, match.coin, newSelected);\r\n        }\r\n    };\r\n\r\n    const handleSlider = (value, coin, select = selected) => {\r\n        let newPortfolio = [...portfolio];\r\n        let match = newPortfolio.find(c => c.coin === coin);\r\n        match.slider = value;\r\n\r\n        let totalSlider = 0;\r\n        let numSlider = 0;\r\n        newPortfolio.forEach((coin) => {\r\n            if (select.indexOf(coin.coin) === -1) {\r\n                totalSlider += coin.slider;\r\n                if (coin.slider === -1) totalSlider++;\r\n                if (coin.slider !== -1) numSlider++;\r\n            }\r\n        });\r\n        let maxSlider;\r\n        const remainingSlider = 100 - totalSlider;\r\n        const numCoinsZero = newPortfolio.length - numSlider - select.length;\r\n        maxSlider = (numCoinsZero === 0) ? totalSlider : Math.max(100, totalSlider);\r\n        newPortfolio.forEach((coin) => {\r\n            coin.excluded = false;\r\n            if (select.indexOf(coin.coin) !== -1) {\r\n                coin.distribution = (0).toFixed(precision);\r\n                coin.excluded = true;\r\n            } else if (maxSlider <= 100) {\r\n                if (coin.slider === -1) coin.distribution = (remainingSlider / numCoinsZero).toFixed(precision);\r\n                else coin.distribution = (coin.slider / maxSlider * 100).toFixed(precision);\r\n            } else {\r\n                if (coin.slider === -1) coin.distribution = (0).toFixed(precision);\r\n                else coin.distribution = (coin.slider / maxSlider * 100).toFixed(precision);\r\n            }\r\n        });\r\n\r\n        setPortfolio(newPortfolio);\r\n        onInput(newPortfolio);\r\n    };\r\n\r\n    const labelFormatter = (value) => {\r\n        if (value === -1) return '=';\r\n        return value;\r\n    }\r\n\r\n    const isSelected = (coin) => selected.indexOf(coin) !== -1;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Grid container alignItems=\"flex-end\">\r\n                <Grid item xs={11}>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                        Coin Settings\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                    <HtmlTooltip\r\n                        title={\r\n                            <React.Fragment>\r\n                                <div><b>{\"Exclude coins\"}</b></div>\r\n                                <div>{\"Use the checkboxes on the left to exclude coins in your account from balancing. Balance Bot will completely ignore selected coins.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div><b>{\"Coin distribution\"}</b></div>\r\n                                <div>{\"By default, all coins are balanced with an equal distribution. If you'd like to change the target distribution of your coins, use the sliders. Coins with their slider all the way to the left will get an even distribution up to a total of 100%.\"}</div>\r\n                            </React.Fragment>\r\n                        }\r\n                    >\r\n                        <InfoOutlinedIcon />\r\n                    </HtmlTooltip>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid container spacing={3}>\r\n                <Paper className={classes.paper} elevation={0}>\r\n\r\n                    {(portfolioReceived) ? (\r\n                        <div>\r\n                            <EnhancedTableToolbar selected={selected} portfolio={portfolio} setSelected={setSelected} />\r\n                            < Table\r\n                                className={classes.table}\r\n                                size=\"small\"\r\n                                aria-labelledby=\"tableTitle\"\r\n                                aria-label=\"enhanced table\"\r\n                            >\r\n                                <EnhancedTableHead\r\n                                    classes={classes}\r\n                                    numSelected={selected.length}\r\n                                    onSelectAllClick={handleSelectAllClick}\r\n                                    rowCount={portfolio.length}\r\n                                />\r\n                                <TableBody>\r\n                                    {portfolio.map((coin, index) => {\r\n                                        const isItemSelected = isSelected(coin.coin);\r\n                                        const labelId = `enhanced-table-checkbox-${index}`;\r\n                                        let checkbox;\r\n                                        if (coin.coin !== 'BTC') {\r\n                                            checkbox = <Checkbox\r\n                                                checked={isItemSelected}\r\n                                                inputProps={{ 'aria-labelledby': labelId }}\r\n                                            />\r\n                                        } else {\r\n                                            checkbox = null;\r\n                                        }\r\n\r\n                                        return (\r\n                                            <TableRow\r\n                                                hover\r\n                                                // onClick={(event) => handleClick(event, coin.coin)}\r\n                                                role=\"checkbox\"\r\n                                                aria-checked={isItemSelected}\r\n                                                tabIndex={-1}\r\n                                                key={coin.coin}\r\n                                                selected={isItemSelected}\r\n                                            >\r\n                                                <TableCell padding=\"checkbox\" onClick={(event) => handleClick(coin.coin)}>\r\n                                                    {checkbox}\r\n                                                </TableCell>\r\n                                                <TableCell component=\"th\" id={labelId} scope=\"row\" padding=\"none\" onClick={(event) => handleClick(coin.coin)}>\r\n                                                    {coin.coin}\r\n                                                </TableCell>\r\n                                                <TableCell align=\"right\">\r\n                                                    <MySlider\r\n                                                        value={coin.slider}\r\n                                                        step={1}\r\n                                                        valueLabelDisplay=\"on\"\r\n                                                        marks={marks}\r\n                                                        min={-1}\r\n                                                        valueLabelFormat={value => <div>{labelFormatter(value)}</div>}\r\n                                                        onChange={(event, value) => handleSlider(value, coin.coin)}\r\n                                                    />\r\n                                                </TableCell>\r\n                                                <TableCell component=\"th\" className={classes.cell} id={labelId} scope=\"row\" padding=\"none\" align=\"left\" onClick={(event) => handleClick(coin.coin)}>\r\n                                                    {coin.distribution}%\r\n                                        </TableCell>\r\n                                                <TableCell component=\"th\" className={classes.cell2} id={labelId} scope=\"row\" padding=\"none\" align=\"left\">\r\n                                                    {(coin.coin === 'BTC' && parseFloat(coin.distribution) === 0) ? (\r\n                                                        <Typography variant=\"overline\" color=\"secondary\">Cannot be 0%</Typography>\r\n                                                    ) : (null)\r\n                                                    }\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        )\r\n                                    })}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </div>\r\n                    ) : (\r\n                        <div>\r\n                            <Box pt={4}></Box>\r\n                            <Typography>Loading account data...</Typography>\r\n                            <Box pt={4}></Box>\r\n                            <Skeleton animation=\"wave\" />\r\n                            <Skeleton animation=\"wave\" />\r\n                            <Skeleton animation=\"wave\" />\r\n                        </div>\r\n                    )}\r\n                </Paper>\r\n            </Grid>\r\n        </React.Fragment>\r\n    );\r\n}","import React, { useState, useContext, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport { format, parseISO } from 'date-fns';\r\nimport 'date-fns';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n    MuiPickersUtilsProvider,\r\n    DatePicker,\r\n} from '@material-ui/pickers';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { HtmlTooltip } from './HtmlToolTip';\r\nimport { socket } from '../context/SocketContext';\r\n\r\nconst columns = [\r\n    { field: 'coin', headerName: 'Coin', width: 350, editable: false },\r\n    { field: 'startnumber', headerName: 'Number', type: 'number', width: 200, editable: true, valueFormatter: ({ value }) => (Number(value)) },\r\n    { field: 'startprice', headerName: 'Price (BTC)', type: 'number', width: 200, editable: true, valueFormatter: ({ value }) => (Number(value)) },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    header: {\r\n        \"& .MuiDataGrid-colCell\":\r\n            theme.palette.type === 'light'\r\n                ? {\r\n                    backgroundColor: '#aaaaaa',\r\n                }\r\n                : {\r\n                    backgroundColor: '#777777',\r\n                },\r\n    },\r\n    paper: {\r\n        width: '100%',\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n}));\r\n\r\nexport default function ConfigP3(props) {\r\n    const classes = useStyles();\r\n\r\n    let newStartPerformance = [];\r\n\r\n    const [input, setInput] = useContext(ConfigurationInputContext);\r\n    const newPortfolio = input.portfolio;\r\n    const [portfolio, setPortfolio] = useState(newPortfolio);\r\n    const [selectedDate, setSelectedDate] = useState(input.startdate);\r\n    const [recreate, setRecreate] = useState(input.recreate);\r\n\r\n    newPortfolio.forEach((coin) => {\r\n        if (!coin.excluded) {\r\n            newStartPerformance.push({\r\n                id: coin.coin,\r\n                coin: coin.coin,\r\n                startnumber: Number((coin.startnumber).toFixed(8)),\r\n                startprice: Number((coin.startprice).toFixed(8)),\r\n            });\r\n        }\r\n    });\r\n\r\n    const [startPerformance, setStartPerformance] = useState(newStartPerformance);\r\n\r\n    const handleDateChange = (input) => {\r\n        setSelectedDate(input);\r\n    };\r\n\r\n    const acceptDateChange = (input) => {\r\n        setSelectedDate(input);\r\n        const date = format(input, \"yyyy/MM/dd\");\r\n        props.callback({\r\n            field: 'startdate',\r\n            input: date,\r\n        });\r\n        props.callback({\r\n            field: 'recreate',\r\n            input: true,\r\n        });\r\n        setRecreate(true);\r\n    };\r\n\r\n    const handleCheck = (e) => {\r\n        const checked = e.target.checked;\r\n        props.callback({\r\n            field: 'recreate',\r\n            input: checked,\r\n        });\r\n        setRecreate(checked);\r\n    }\r\n\r\n    const handleEditCellChangeCommitted = (e) => {\r\n        let newPortfolio = [...portfolio];\r\n        let match = newPortfolio.find(c => c.coin === e.id);\r\n        match[e.field] = Number(e.props.value);\r\n\r\n        setPortfolio(newPortfolio);\r\n        props.callback({\r\n            field: 'portfolio',\r\n            input: newPortfolio,\r\n        });\r\n        setRecreate(true);\r\n    }\r\n\r\n    const handleButton = () => {\r\n        let coins = [];\r\n        portfolio.forEach((coin) => {\r\n            coins.push({\r\n                coin: coin.coin,\r\n                symbol: coin.symbol,\r\n            })\r\n        })\r\n        if (socket) socket.emit(\"get-initial-trades\", {\r\n            startdate: selectedDate,\r\n            coins: coins,\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        socket.on(\"initial-trades\", (coins) => {\r\n            newStartPerformance = [];\r\n            coins.forEach((coin) => {\r\n                newStartPerformance.push({\r\n                    id: coin.coin,\r\n                    coin: coin.coin,\r\n                    startnumber: Number((coin.coinamount).toFixed(8)),\r\n                    startprice: Number((coin.price).toFixed(8)),\r\n                });\r\n            });\r\n            setStartPerformance(newStartPerformance);\r\n        });\r\n\r\n        return () => {\r\n            socket.off(\"initial-trades\");\r\n        }\r\n    }, []);\r\n\r\n    function CustomToolbar() {\r\n        return (\r\n            <Grid container alignItems=\"flex-end\">\r\n                <Grid item xs={12}>\r\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                        <DatePicker\r\n                            disableToolbar=\"true\"\r\n                            variant=\"inline\"\r\n                            format=\"yyyy/MM/dd\"\r\n                            margin=\"normal\"\r\n                            id=\"date-picker-inline\"\r\n                            label=\"Set start date\"\r\n                            value={selectedDate}\r\n                            disableFuture=\"true\"\r\n                            onChange={handleDateChange}\r\n                            onAccept={acceptDateChange}\r\n                        />\r\n                    </MuiPickersUtilsProvider>\r\n                </Grid>\r\n                <Grid container alignItems=\"center\" justify=\"space-between\">\r\n                    <Grid item xs={9}>\r\n                        <FormControlLabel\r\n                            control={<Checkbox color=\"secondary\" name=\"rewrite\" value=\"yes\" checked={recreate} onChange={handleCheck} />}\r\n                            label=\"Recreate performance history\"\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={3}>\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={handleButton}>\r\n                            Use initial trades\r\n                        </Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Grid container alignItems=\"flex-end\">\r\n                <Grid item xs={11}>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                        Starting Balance\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                    <HtmlTooltip\r\n                        title={\r\n                            <React.Fragment>\r\n                                <div><b>{\"Use of starting balance\"}</b></div>\r\n                                <div>{\"Balance Bot uses the starting balance to determine the performance of your balancing portfolio. It compares the current portfolio value with the starting portfolio value to calculate the change.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div><b>{\"Default starting balance\"}</b></div>\r\n                                <div>{\"By default, Balance Bot will check the number of coins in your account and their prices upon first-time configuration, and use these to calculate the starting balance.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div><b>{\"Customize starting balance\"}</b></div>\r\n                                <div>{\"If you started balancing at an earlier point in time, you can manually set the starting balance for your account. Do so by filling in the number of coins and their prices at which you purchased those coins. Simply click on the cells in the table to edit. Tick the 'Recreate performance history' checkbox to confirm you want to recreate your performance history.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div>{\"Make sure to set the start date \"}<b>{\"after\"}</b>{\" the date when you bought the coins in your portfolio, to avoid these purchases to be counted twice.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div>{\"Depending on the start date and your trade history, it may take several minutes to recreate your performance history and until this is visible on the performance screen. You will receive a notification message once the process has completed.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div>{\"Alternatively, you can let Balance Bot retrieve the initial trades that you used to set up your portfolio. To do so, set the start date right \"}<b>{\"before\"}</b>{\" you executed those trades. It will then look for the first order of your altcoins as of that date, and use that to set the number of coins and the initial price. This assumes that you purchased your altcoins with BTC. Also, you'll still need to manually set the amount of BTC in the table.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div><i>{\"Note: \"}</i>{\"This operation will also recreate your event history, including all executed orders since the start date, but excluding error messages. You can set a new starting balance and date at anytime.\"}</div>\r\n                            </React.Fragment>\r\n                        }\r\n                    >\r\n                        <InfoOutlinedIcon />\r\n                    </HtmlTooltip>\r\n                </Grid>\r\n            </Grid>\r\n            <div style={{ width: '752px' }}>\r\n                <CustomToolbar />\r\n                <Box pt={3}>\r\n                    <Grid container spacing={3}>\r\n                        <Paper className={classes.paper} elevation={0}>\r\n                            <div style={{ width: '752px' }}>\r\n                                <DataGrid className={classes.header} rows={startPerformance} columns={columns}\r\n                                    autoHeight={true}\r\n                                    density='compact'\r\n                                    disableColumnSelector={true}\r\n                                    disableColumnMenu={true}\r\n                                    hideFooter={true}\r\n                                    hideFooterPagination={true}\r\n                                    hideFooterRowCount={true}\r\n                                    onEditCellChangeCommitted={handleEditCellChangeCommitted}\r\n                                />\r\n                            </div>\r\n                        </Paper>\r\n                    </Grid>\r\n                </Box>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n}","import React, { useState, useContext } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { add } from 'date-fns'\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { HtmlTooltip } from './HtmlToolTip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n        minWidth: '100%',\r\n    },\r\n    selectEmpty: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    textinput: {\r\n        width: '380px',\r\n    }\r\n}));\r\n\r\nexport default function ConfigP4(props) {\r\n    const classes = useStyles();\r\n\r\n    const [input, setInput] = useContext(ConfigurationInputContext);\r\n\r\n    const newBotname = (input.botname) ? input.botname : '';\r\n    const newThreshold = (input.threshold) ? input.threshold : '';\r\n    const newTimeshift = (input.timeshift) ? input.timeshift : '0';\r\n    const newHeadless = (input.headless) ? input.headless : false;\r\n    const newRunning = (input.running) ? input.running : true;\r\n\r\n    const [botname, setBotname] = useState(newBotname);\r\n    const [threshold, setThreshold] = useState(newThreshold);\r\n    const [timeshift, setTimeshift] = useState(newTimeshift);\r\n    const [headless, setHeadless] = useState(newHeadless);\r\n    const [running, setRunning] = useState(newRunning);\r\n\r\n    const getHour = (shift) => {\r\n        const now = new Date();\r\n        const current = now.getHours().toString().padStart(2, '0') + \":\" + now.getMinutes().toString().padStart(2, '0');\r\n        let adjusted = now;\r\n        if (shift !== 0) adjusted = add(now, { hours: shift });\r\n\r\n        const newt = adjusted.getHours().toString().padStart(2, '0') + \":\" + adjusted.getMinutes().toString().padStart(2, '0');\r\n        return [current, newt];\r\n    }\r\n\r\n    const [currenttime, setCurrenttime] = useState(getHour(newTimeshift)[0]);\r\n    const [newtime, setNewtime] = useState(getHour(newTimeshift)[1]);\r\n\r\n    const onHeadless = (e) => {\r\n        props.callback({\r\n            field: 'headless',\r\n            input: e.target.checked,\r\n        });\r\n        setHeadless(e.target.checked);\r\n    }\r\n\r\n    const onRunning = (e) => {\r\n        props.callback({\r\n            field: 'running',\r\n            input: e.target.checked,\r\n        });\r\n        setRunning(e.target.checked);\r\n    }\r\n\r\n    const onBotname = (e) => {\r\n        props.callback({\r\n            field: e.target.id,\r\n            input: e.target.value\r\n        });\r\n        setBotname(e.target.value);\r\n    }\r\n\r\n    const onThreshold = (e) => {\r\n        const pattern = /^[0-9]*\\.?[0-9]*$/\r\n        if (pattern.test(e.target.value)) {\r\n            props.callback({\r\n                field: e.target.id,\r\n                input: e.target.value\r\n            });\r\n            setThreshold(e.target.value);\r\n        }\r\n    }\r\n\r\n    const onTimeshift = (e) => {\r\n        props.callback({\r\n            field: 'timeshift',\r\n            input: e.target.value\r\n        });\r\n        setTimeshift(e.target.value);\r\n        setNewtime(getHour(e.target.value)[1]);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Grid container alignItems=\"flex-end\">\r\n                <Grid item xs={11}>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                        General Settings\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                    <HtmlTooltip\r\n                        title={\r\n                            <React.Fragment>\r\n                                <div><b>{\"Bot name\"}</b></div>\r\n                                <div>{\"Give your bot a descriptive name. This is especially useful if you run multiple bots, so you can easily recognize each.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div><b>{\"Balancing threshold\"}</b></div>\r\n                                <div>{\"The balancing threshold is used by Balance Bot to determine when to sell/buy coins. The threshold is the relative deviation from the target distribution at which point the bot will place an order to restore the coin to the target distribution.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div><b>{\"Server timezone adjustment\"}</b></div>\r\n                                <div>{\"If you're hosting your bot in the cloud, and the server's timezone is different from your local timezone, you can use this setting to adjust for that so that timestamps for orders and other events are provided in your local timezone.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div><b>{\"Automatic mode\"}</b></div>\r\n                                <div>{\"You can operate your bot manually. In this mode, you will need to keep an eye on the dashboard and place manual orders when the dashboard indicates that a coin should be bought or sold. This is useful if you want to have full control, typically when you use Balance Bot for the first time and you want to get a feel for how it works.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div>{\"Enabling automatic mode is a lot more practical though, as Balance Bot will run 24/7 and place orders automatically to keep your portfolio balanced.\"}</div>\r\n                                <div>&nbsp;</div>\r\n                                <div><i>{\"Note: \"}</i>{\"You don't need to keep your browser open to run your bot in automatic mode. The application will keep running in the background. You can open the application in the browser at any time to check the status of your bot.\"}</div>\r\n                            </React.Fragment>\r\n                        }\r\n                    >\r\n                        <InfoOutlinedIcon />\r\n                    </HtmlTooltip>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid container spacing={3}>\r\n                <Grid item xs={12}>\r\n                    <TextField\r\n                        required\r\n                        id=\"botname\"\r\n                        name=\"botname\"\r\n                        label=\"Bot Name\"\r\n                        helperText=\"Give your bot a name\"\r\n                        value={botname}\r\n                        onChange={onBotname}\r\n                        className={classes.textinput}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <TextField\r\n                        required\r\n                        id=\"threshold\"\r\n                        name=\"threshold\"\r\n                        label=\"Balancing Threshold (%)\"\r\n                        helperText=\"At what deviation from the target distribution should be balanced\"\r\n                        value={threshold}\r\n                        onChange={onThreshold}\r\n                        className={classes.textinput}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <FormControl className={classes.formControl}>\r\n                        <InputLabel id=\"server-timezone\">Adjust for server timezone</InputLabel>\r\n                        <Select\r\n                            labelId=\"server-timezone\"\r\n                            value={timeshift}\r\n                            onChange={onTimeshift}\r\n                            className={classes.textinput}\r\n                        >\r\n                            <MenuItem value={12}>+12:00</MenuItem>\r\n                            <MenuItem value={11}>+11:00</MenuItem>\r\n                            <MenuItem value={10}>+10:00</MenuItem>\r\n                            <MenuItem value={9}>+09:00</MenuItem>\r\n                            <MenuItem value={8}>+08:00</MenuItem>\r\n                            <MenuItem value={7}>+07:00</MenuItem>\r\n                            <MenuItem value={6}>+06:00</MenuItem>\r\n                            <MenuItem value={5}>+05:00</MenuItem>\r\n                            <MenuItem value={4}>+04:00</MenuItem>\r\n                            <MenuItem value={3}>+03:00</MenuItem>\r\n                            <MenuItem value={2}>+02:00</MenuItem>\r\n                            <MenuItem value={1}>+01:00</MenuItem>\r\n                            <MenuItem value={0}>No adjustment</MenuItem>\r\n                            <MenuItem value={-1}>-01:00</MenuItem>\r\n                            <MenuItem value={-2}>-02:00</MenuItem>\r\n                            <MenuItem value={-3}>-03:00</MenuItem>\r\n                            <MenuItem value={-4}>-04:00</MenuItem>\r\n                            <MenuItem value={-5}>-05:00</MenuItem>\r\n                            <MenuItem value={-6}>-06:00</MenuItem>\r\n                            <MenuItem value={-7}>-07:00</MenuItem>\r\n                            <MenuItem value={-8}>-08:00</MenuItem>\r\n                            <MenuItem value={-9}>-09:00</MenuItem>\r\n                            <MenuItem value={-10}>-10:00</MenuItem>\r\n                            <MenuItem value={-11}>-11:00</MenuItem>\r\n                            <MenuItem value={-12}>-12:00</MenuItem>\r\n                        </Select>\r\n                        <FormHelperText>Current server time: {currenttime} - Adjusted server time: {newtime}</FormHelperText>\r\n                    </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <FormControlLabel\r\n                        control={<Checkbox color=\"secondary\" name=\"headless\" checked={headless} onChange={onHeadless} />}\r\n                        label=\"Run bot in automatic mode\"\r\n                    />\r\n                </Grid>\r\n                {/* <Grid item xs={12}>\r\n                    <FormControlLabel\r\n                        control={<Checkbox color=\"secondary\" name=\"running\" checked={running} onChange={onRunning} />}\r\n                        label=\"Bot actived\"\r\n                    />\r\n                </Grid> */}\r\n            </Grid>\r\n        </React.Fragment>\r\n    );\r\n}","import React, { useState, useEffect, useContext } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ConfigP1 from './ConfigP1';\r\nimport ConfigP2 from './ConfigP2';\r\nimport ConfigP3 from './ConfigP3';\r\nimport ConfigP4 from './ConfigP4';\r\nimport { socket } from '../context/SocketContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: '1000px',\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(3),\r\n        marginBottom: theme.spacing(3),\r\n        padding: theme.spacing(2),\r\n        [theme.breakpoints.up(600 + theme.spacing(3) * 2)]: {\r\n            marginTop: theme.spacing(6),\r\n            marginBottom: theme.spacing(6),\r\n            padding: theme.spacing(3),\r\n        },\r\n    },\r\n    stepper: {\r\n        padding: theme.spacing(3, 0, 5),\r\n    },\r\n    buttons: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    button: {\r\n        marginTop: theme.spacing(3),\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n}));\r\n\r\nconst steps = ['Exchange API', 'Coin Settings', 'Starting Balance', 'General Settings'];\r\n\r\nexport default function ConfigMain() {\r\n    const classes = useStyles();\r\n    const [configuration, setConfiguration] = useContext(ConfigurationContext);\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const [input, setInput] = useContext(ConfigurationInputContext);\r\n    const [startingBalance, setStartingBalance] = useContext(StartingBalanceContext);\r\n\r\n    useEffect(() => {\r\n        setInput({ ...input, recreate: false });\r\n\r\n        return () => {\r\n        }\r\n    }, []);\r\n\r\n    const handleNext = () => {\r\n        let error = false;\r\n        if (activeStep === 0) getPortfolio();\r\n        if (activeStep === 3) {\r\n            if (input.botname.length === 0) {\r\n                error = true;\r\n                enqueueSnackbar('Bot name must be defined', {\r\n                    variant: 'error',\r\n                    autoHideDuration: 8000,\r\n                });\r\n            }\r\n            if (Number(input.threshold) === 0) {\r\n                error = true;\r\n                enqueueSnackbar('Threshold must be defined', {\r\n                    variant: 'error',\r\n                    autoHideDuration: 8000,\r\n                });\r\n            }\r\n            if (!error) {\r\n                storeConfiguration();\r\n                // Wait for server confirmation below\r\n            }\r\n        }\r\n        if (activeStep !== 3) setActiveStep(activeStep + 1);\r\n    };\r\n\r\n    useEffect(() => {\r\n        socket.on(\"configuration-stored\", () => {\r\n            setInput((prevState => {\r\n                return {\r\n                    ...prevState,\r\n                    apiKey: '************',\r\n                    apiSecret: '************',\r\n                }\r\n            }));\r\n            // Reset starting balances to trigger reload (in case coins were added to portfolio)\r\n            setStartingBalance([]);\r\n\r\n            setActiveStep(4);\r\n        });\r\n\r\n        return () => {\r\n            socket.off(\"configuration-stored\");\r\n        }\r\n    }, []);\r\n\r\n    const handleBack = () => {\r\n        if (activeStep === 2) getPortfolio();\r\n        setActiveStep(activeStep - 1);\r\n    };\r\n\r\n    const handleInput = (e) => {\r\n        let newInput = input;\r\n        newInput[e.field] = e.input;\r\n        setInput(newInput);\r\n    }\r\n\r\n    const getPortfolio = () => {\r\n        if (socket) socket.emit(\"get-portfolio\", {\r\n            apiKey: input.apiKey,\r\n            apiSecret: input.apiSecret,\r\n        });\r\n    }\r\n    const storeConfiguration = () => {\r\n        if (socket) {\r\n            socket.emit(\"store-configuration\", input);\r\n            setConfiguration(input);\r\n        }\r\n    }\r\n\r\n    function getStepContent(step) {\r\n        // step = 3;\r\n        switch (step) {\r\n            case 0:\r\n                return <ConfigP1 callback={handleInput} />;\r\n            case 1:\r\n                return <ConfigP2 callback={handleInput} />;\r\n            case 2:\r\n                return <ConfigP3 callback={handleInput} />;\r\n            case 3:\r\n                return <ConfigP4 callback={handleInput} />;\r\n            default:\r\n                throw new Error('Unknown step');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n            <main className={classes.layout}>\r\n                <Paper className={classes.paper}>\r\n                    <Stepper activeStep={activeStep} className={classes.stepper}>\r\n                        {steps.map((label) => (\r\n                            <Step key={label}>\r\n                                <StepLabel>{label}</StepLabel>\r\n                            </Step>\r\n                        ))}\r\n                    </Stepper>\r\n                    <React.Fragment>\r\n                        {activeStep === steps.length ? (\r\n                            <React.Fragment>\r\n                                <Typography variant=\"h5\" gutterBottom>\r\n                                    Configuration has been saved\r\n                                </Typography>\r\n                                <Typography variant=\"subtitle1\">\r\n                                    You can now leave this page\r\n                                </Typography>\r\n                            </React.Fragment>\r\n                        ) : (\r\n                            <React.Fragment>\r\n                                {getStepContent(activeStep)}\r\n                                <div className={classes.buttons}>\r\n                                    {activeStep !== 0 && (\r\n                                        <Button onClick={handleBack} className={classes.button}>\r\n                                            Back\r\n                                        </Button>\r\n                                    )}\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={handleNext}\r\n                                        className={classes.button}\r\n                                    >\r\n                                        {activeStep === steps.length - 1 ? 'Save Configuation' : 'Next'}\r\n                                    </Button>\r\n                                </div>\r\n                            </React.Fragment>\r\n                        )}\r\n                    </React.Fragment>\r\n                </Paper>\r\n            </main>\r\n        </React.Fragment>\r\n    );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport ConfigMain from \"../components/ConfigMain\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\n\r\nconst Configuration = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Configuration\r\n        </Typography>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <ConfigMain />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Configuration;","import PieChartIcon from '@material-ui/icons/PieChart';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\nimport BarChartIcon from '@material-ui/icons/BarChart';\r\nimport HistoryIcon from '@material-ui/icons/History';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport Portfolio from '../pages/Portfolio';\r\nimport PPerformance from '../pages/PPerformance';\r\nimport CoinAnalysis from '../pages/CoinAnalysis';\r\nimport EventHistory from '../pages/EventHistory';\r\nimport Configuration from '../pages/Configuration';\r\n\r\nconst routesUp = [\r\n  {\r\n    path: '/',\r\n    sidebarName: 'Portfolio',\r\n    icon: PieChartIcon,\r\n    component: Portfolio,\r\n  },\r\n  {\r\n    path: '/performance',\r\n    sidebarName: 'Performance',\r\n    icon: BarChartIcon,\r\n    component: PPerformance,\r\n  },\r\n  {\r\n    path: '/coins',\r\n    sidebarName: 'Coin Analysis',\r\n    icon: ShowChartIcon,\r\n    component: CoinAnalysis,\r\n  },\r\n  {\r\n    path: '/history',\r\n    sidebarName: 'Event History',\r\n    icon: HistoryIcon,\r\n    component: EventHistory,\r\n  },\r\n];\r\n\r\nconst routesDown = [\r\n  {\r\n    path: '/configuration',\r\n    sidebarName: 'Configuration',\r\n    icon: SettingsIcon,\r\n    component: Configuration,\r\n  }\r\n];\r\n\r\nexport { routesUp, routesDown };","import React, { useContext, useState, useEffect } from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { Link, Switch, Route, BrowserRouter, Redirect } from 'react-router-dom';\r\nimport DMSwitch from '@material-ui/core/Switch';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Box from '@material-ui/core/Box';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport { ThemeProvider } from \"@material-ui/styles\";\r\nimport { createMuiTheme } from \"@material-ui/core\";\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\nimport { FiatContext } from '../context/FiatContext';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { isAfter } from 'date-fns';\r\nimport { useSnackbar } from 'notistack';\r\nimport { SnackbarProvider } from 'notistack';\r\n\r\nimport { routesUp, routesDown } from '../routes/Routes';\r\n\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  logo: {\r\n    maxWidth: 60,\r\n    padding: 10,\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n    height: '100%',\r\n  },\r\n  drawerContainer: {\r\n    overflow: 'auto',\r\n  },\r\n  content: {\r\n    justify: \"flex-start\",\r\n    alignItems: \"flex-start\",\r\n    flexGrow: 1,\r\n    padding: theme.spacing(2),\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n  bottomPush: {\r\n    position: \"fixed\",\r\n    bottom: 0,\r\n    paddingBottom: 30,\r\n  },\r\n}));\r\n\r\nexport default function Main() {\r\n  const [mode, setMode] = useLocalStore('mode', 'light');\r\n  const setFiatStore = useLocalStore('fiat', 'EUR')[1];\r\n  const [fiat, setFiat] = useContext(FiatContext);\r\n  const configuration = useContext(ConfigurationContext)[0];\r\n  const { status, updated } = useContext(ServerContext)[0];\r\n\r\n  const [open, setOpen] = useState(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setOpen(status !== 'connected' || Object.keys(configuration).length === 0)\r\n    return () => {\r\n    }\r\n  }, [status, configuration]);\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleDarkmode = (e) => {\r\n    (mode === 'light') ? setMode('dark') : setMode('light');\r\n  }\r\n\r\n  const handleFiat = (e) => {\r\n    if (fiat === 'EUR') {\r\n      setFiat('USD');\r\n      setFiatStore('USD');\r\n    } else {\r\n      setFiat('EUR');\r\n      setFiatStore('EUR');\r\n    }\r\n  }\r\n\r\n  const theme = createMuiTheme({\r\n    palette: {\r\n      type: mode\r\n    }\r\n  });\r\n\r\n  const StyledButton = withStyles({\r\n    root: {\r\n      '&:hover': {\r\n        backgroundColor: 'transparent',\r\n      },\r\n      '&:click': {\r\n        backgroundColor: '#f00',\r\n      },\r\n    },\r\n  })(Button);\r\n\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const timebomb = isAfter(new Date(), new Date(2021, 5, 1));   // After 2021/06/01?\r\n\r\n  useEffect(() => {\r\n    if (timebomb) {\r\n      enqueueSnackbar('Please install new version to continue using Balance Bot', {\r\n        variant: 'error',\r\n        autoHideDuration: null,\r\n      });\r\n    }\r\n  }, [])\r\n\r\n  return !timebomb ? (\r\n    <ThemeProvider theme={theme}>\r\n      <Backdrop className={classes.backdrop} open={open} onClick={handleClose}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <BrowserRouter>\r\n        <div className={classes.root}>\r\n          <CssBaseline />\r\n          <AppBar position=\"fixed\" className={classes.appBar}>\r\n            <Toolbar>\r\n              <img src=\"/logo192.png\" alt=\"Balance Bot Logo\" className={classes.logo} />\r\n              <Typography variant=\"h6\" noWrap>\r\n                Balance Bot\r\n          </Typography>\r\n            </Toolbar>\r\n          </AppBar>\r\n          <Drawer className={classes.drawer} variant=\"permanent\">\r\n            <Paper className={classes.drawerPaper}>\r\n              <Grid container direction=\"column\">\r\n                <Grid item xs={12}>\r\n                  <Toolbar />\r\n                  {(configuration.apiKey !== '') ? (\r\n                    <div className={classes.drawerContainer}>\r\n                      <List>\r\n                        {routesUp.map((prop, key) => {\r\n                          return (\r\n                            <Link to={prop.path} style={{ textDecoration: 'none' }} key={key}>\r\n                              <ListItem button key={prop.sidebarName}>\r\n                                <ListItemIcon><prop.icon /></ListItemIcon>\r\n                                <ListItemText primary={prop.sidebarName} primaryTypographyProps={{ variant: 'button', color: 'textPrimary' }} />\r\n                              </ListItem>\r\n                            </Link>\r\n                          );\r\n                        })}\r\n                      </List>\r\n                      <Divider />\r\n                      {routesDown.map((prop, key) => {\r\n                        return (\r\n                          <Link to={prop.path} style={{ textDecoration: 'none' }} key={key}>\r\n                            <ListItem button key={prop.sidebarName}>\r\n                              <ListItemIcon><prop.icon /></ListItemIcon>\r\n                              <ListItemText primary={prop.sidebarName} primaryTypographyProps={{ variant: 'button', color: 'textPrimary' }} />\r\n                            </ListItem>\r\n                          </Link>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  ) : (\r\n                    <div className={classes.drawerContainer}>\r\n                      <List>\r\n                        {routesUp.map((prop, key) => {\r\n                          return (\r\n                            <Redirect to={'/configuration'} style={{ textDecoration: 'none' }} key={key}>\r\n                              <ListItem button key={prop.sidebarName}>\r\n                                <ListItemIcon><prop.icon /></ListItemIcon>\r\n                                <ListItemText primary={prop.sidebarName} primaryTypographyProps={{ variant: 'button', color: 'textPrimary' }} />\r\n                              </ListItem>\r\n                            </Redirect>\r\n                          );\r\n                        })}\r\n                      </List>\r\n                      <Divider />\r\n                      {routesDown.map((prop, key) => {\r\n                        return (\r\n                          <Link to={prop.path} style={{ textDecoration: 'none' }} key={key}>\r\n                            <ListItem button key={prop.sidebarName}>\r\n                              <ListItemIcon><prop.icon /></ListItemIcon>\r\n                              <ListItemText primary={prop.sidebarName} primaryTypographyProps={{ variant: 'button', color: 'textPrimary' }} />\r\n                            </ListItem>\r\n                          </Link>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                </Grid>\r\n                <div className={classes.bottomPush}>\r\n                  <Box pl={1}>\r\n                    <Grid container item xs={12} alignItems=\"center\" justify=\"flex-end\">\r\n                      <Grid item xs={8}>\r\n                        <FormControlLabel\r\n                          onChange={handleDarkmode}\r\n                          value={mode}\r\n                          control={<DMSwitch checked={mode === 'dark'} color=\"secondary\" />}\r\n                          label={<Typography variant=\"button\">Light</Typography>}\r\n                          labelPlacement=\"start\"\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={4}>\r\n                        <StyledButton disableRipple onClick={handleDarkmode}><Typography variant=\"button\">Dark</Typography></StyledButton>\r\n                      </Grid>\r\n                    </Grid>\r\n\r\n                    <Grid container item xs={12} alignItems=\"center\" justify=\"flex-end\">\r\n                      <Grid item xs={8}>\r\n                        <FormControlLabel\r\n                          onChange={handleFiat}\r\n                          value={fiat}\r\n                          control={<DMSwitch checked={fiat === 'EUR'} color=\"secondary\" />}\r\n                          label={<Typography variant=\"button\">USD&nbsp;&nbsp;&nbsp;</Typography>}\r\n                          labelPlacement=\"start\"\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={4}>\r\n                        <StyledButton disableRipple onClick={handleFiat}><Typography variant=\"button\">EUR</Typography></StyledButton>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Box>\r\n                </div>\r\n              </Grid>\r\n            </Paper>\r\n          </Drawer>\r\n          <main className={classes.content}>\r\n            <Toolbar />\r\n            <Switch>\r\n              {routesUp.map((prop, key) => {\r\n                return (\r\n                  <Route exact path={prop.path} component={prop.component} key={key} />\r\n                );\r\n              })}\r\n              {routesDown.map((prop, key) => {\r\n                return (\r\n                  <Route exact path={prop.path} component={prop.component} key={key} />\r\n                );\r\n              })}\r\n            </Switch>\r\n          </main>\r\n        </div>\r\n      </BrowserRouter>\r\n    </ThemeProvider>\r\n  ) : (\r\n    <SnackbarProvider maxSnack={5}>\r\n    </SnackbarProvider>\r\n  );\r\n}","import { useEffect, useContext } from \"react\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { socket } from '../context/SocketContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { BalancesContext } from '../context/BalancesContext';\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\nimport { add } from 'date-fns'\r\n\r\nexport default function SocketService() {\r\n    let [{ status, updated }, setServer] = useContext(ServerContext);\r\n    const [balances, setBalances] = useContext(BalancesContext);\r\n    const [performance, setPerformance] = useContext(PerformanceContext);\r\n    const [configuration, setConfiguration] = useContext(ConfigurationContext);\r\n    const [configurationInput, setConfigurationInput] = useContext(ConfigurationInputContext);\r\n    const setStartingBalance = useContext(StartingBalanceContext)[1];\r\n\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const handleEvent = (log, summary) => {\r\n        const variant = (log.type === 'order') ? 'info' : log.type;\r\n        enqueueSnackbar(summary, {\r\n            variant: variant,\r\n            autoHideDuration: 8000,\r\n        });\r\n    };\r\n\r\n    const updatePerformance = () => {\r\n        const rows = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n        let update = [];\r\n\r\n        rows.forEach((coin) => {\r\n            update.push({\r\n                coin: coin.coin,\r\n                number: coin.number,\r\n                price: coin.last,\r\n            });\r\n        });\r\n        if (performance.length !== 0) {\r\n            // console.log(performance[performance.length - 1].date)\r\n            // console.log(getDate())\r\n            if (performance[performance.length - 1].date === getDate()) {\r\n                let newPerformance = [...performance];\r\n                newPerformance[newPerformance.length - 1].coins = update;\r\n                newPerformance[newPerformance.length - 1].eur = balances.eur;\r\n                newPerformance[newPerformance.length - 1].usd = balances.usd;\r\n                setPerformance(newPerformance);\r\n            } else {\r\n                // It's a new day, the server will send an update automatically\r\n                // console.log(getTimeStamp() + ' | new day, waiting for performance update');\r\n            }\r\n        }\r\n    }\r\n\r\n    const shiftedDate = () => {\r\n        const now = new Date();\r\n        let adjusted = now;\r\n        if (configuration.timeshift && configuration.timeshift !== 0) adjusted = add(now, { hours: configuration.timeshift });\r\n        return adjusted;\r\n    }\r\n\r\n    const getDate = () => {\r\n        const now = shiftedDate();\r\n\r\n        return now.getFullYear() + \"/\" + (now.getMonth() + 1).toString().padStart(2, '0') + \"/\" + now.getDate().toString().padStart(2, '0');\r\n    }\r\n\r\n    function getTimeStamp() {\r\n        const now = shiftedDate();\r\n\r\n        return now.getFullYear() + \"/\" + (now.getMonth() + 1).toString().padStart(2, '0') + \"/\" + now.getDate().toString().padStart(2, '0') + \" \" + now.getHours().toString().padStart(2, '0') + \":\" + now.getMinutes().toString().padStart(2, '0') + \":\" + now.getSeconds().toString().padStart(2, '0');\r\n    }\r\n\r\n    useEffect(() => {\r\n        updatePerformance();\r\n        return () => {\r\n        }\r\n    }, [balances]);\r\n\r\n    useEffect(() => {\r\n        socket.on(\"status\", data => {\r\n            setServer({\r\n                status: data,\r\n                updated: updated,\r\n            });\r\n        });\r\n        socket.on(\"balances\", data => {\r\n            setBalances(data);\r\n            setServer({\r\n                status: 'connected',\r\n                updated: data.time,\r\n            });\r\n        });\r\n        socket.on(\"performance\", (logs) => {\r\n            setPerformance(logs);\r\n        });\r\n        socket.on(\"configuration\", (config) => {\r\n            setConfiguration(config);\r\n            setConfigurationInput({ ...config, recreate: false });\r\n        });\r\n        socket.on(\"starting-balances\", (sb) => {\r\n            setStartingBalance(sb);\r\n        });\r\n        socket.on(\"event\", function (log, summary) {\r\n            handleEvent(log, summary);\r\n        });\r\n        socket.on(\"disconnect\", data => {\r\n            setServer({\r\n                status: 'disconnected',\r\n                updated: updated,\r\n            });\r\n        });\r\n\r\n        return () => {\r\n            socket.disconnect();\r\n        }\r\n    }, []);\r\n\r\n    return (null);\r\n}","import './App.css';\nimport React, { useEffect } from 'react';\nimport Main from './pages/Main';\nimport { ServerProvider } from './context/ServerContext';\nimport { BalancesProvider } from './context/BalancesContext';\nimport { PerformanceProvider } from './context/PerformanceContext';\nimport { ConfigurationProvider } from './context/ConfigurationContext';\nimport { ConfigurationInputProvider } from './context/ConfigurationInputContext';\nimport { StartingBalanceProvider } from './context/StartingBalanceContext';\nimport { FiatProvider } from './context/FiatContext';\nimport { SnackbarProvider } from 'notistack';\nimport SocketService from './services/SocketService';\nimport { CssBaseline } from \"@material-ui/core\";\nimport MaterialUIPickers from './components/testdate';\n\nfunction App() {\n  useEffect(() => {\n    const script1 = document.createElement(\"script\");\n    script1.async = true;\n    script1.src = \"https://www.googletagmanager.com/gtag/js?id=G-XBDNDRB9LJ\";\n    document.body.appendChild(script1);\n\n    const script2 = document.createElement(\"script\");\n    script2.text =\n      `window.dataLayer = window.dataLayer || [];\n    function gtag() { dataLayer.push(arguments); }\n    gtag('js', new Date());\n    gtag('config', 'G-XBDNDRB9LJ');`;\n    document.body.appendChild(script2);\n  }, [])\n\n  return (\n    <SnackbarProvider maxSnack={5}>\n      <ServerProvider>\n        <BalancesProvider>\n          <PerformanceProvider>\n            <ConfigurationProvider>\n              <ConfigurationInputProvider>\n                <StartingBalanceProvider>\n                  <FiatProvider>\n                    <SocketService />\n                    <CssBaseline />\n                    <Main />\n                    {/* <MaterialUIPickers /> */}\n                  </FiatProvider>\n                </StartingBalanceProvider>\n              </ConfigurationInputProvider>\n            </ConfigurationProvider>\n          </PerformanceProvider>\n        </BalancesProvider>\n      </ServerProvider>\n    </SnackbarProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}